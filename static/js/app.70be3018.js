(function(e){function t(t){for(var s,o,n=t[0],c=t[1],l=t[2],u=0,m=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&m.push(i[o][0]),i[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);d&&d(t);while(m.length)m.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,n=1;n<a.length;n++){var c=a[n];0!==i[c]&&(s=!1)}s&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},i={app:0},r=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var l=0;l<n.length;l++)t(n[l]);var d=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"0904":function(e,t,a){"use strict";a("7603")},"105f":function(e,t,a){},"17c7":function(e,t,a){"use strict";a("b3b2")},"3acd":function(e,t,a){},4139:function(e,t,a){"use strict";a("9d08")},"4c43":function(e,t,a){"use strict";a("ede2")},"53c9":function(e,t,a){"use strict";a("e1b3")},"5b70":function(e,t,a){},"5c0b":function(e,t,a){"use strict";a("9c0c")},"610d":function(e,t,a){},"61f6":function(e,t,a){"use strict";a("aec5")},7603:function(e,t,a){},7805:function(e,t,a){},7893:function(e,t,a){"use strict";a("7805")},"871e":function(e,t,a){"use strict";a("c246")},9227:function(e,t,a){"use strict";a("bd5c")},"94d5":function(e,t,a){},"98be":function(e,t,a){},"9c0c":function(e,t,a){},"9d08":function(e,t,a){},"9fe4":function(e,t,a){"use strict";a("94d5")},"9fe5":function(e,t,a){"use strict";a("f82b")},a7ab:function(e,t,a){"use strict";a("105f")},aec5:function(e,t,a){},b3b2:function(e,t,a){},b758:function(e,t,a){"use strict";a("5b70")},bd5c:function(e,t,a){},c246:function(e,t,a){},c36d:function(e,t,a){"use strict";a("610d")},c3f3:function(e,t,a){"use strict";a("3acd")},cd49:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=a("1dce"),r=a.n(i),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},n=[],c=(a("5c0b"),a("2877")),l={},d=Object(c["a"])(l,o,n,!1,null,null,null),u=d.exports,m=a("bc3a"),v=a.n(m),p=a("8c4f"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("LoginForm")],1)},h=[],b=a("d4ec"),g=a("262e"),y=a("2caf"),C=a("9ab4"),w=a("60a3"),_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"section--2 login__form p-4 m-6 animate__animated animate__fadeIn",on:{submit:e.loginForm}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label is-size-7 has-text-left"},[e._v("Email")]),a("div",{staticClass:"control has-icons-left"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"input",attrs:{type:"email",required:""},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}})]),a("span",{staticClass:"icon is-small is-left"},[a("font-awesome-icon",{attrs:{icon:["fas","user"]}})],1)])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label is-size-7 has-text-left\t"},[e._v("Mot de passe")]),a("div",{staticClass:"control has-icons-left"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],staticClass:"input",attrs:{type:"password",required:""},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}})]),a("span",{staticClass:"icon is-small is-left"},[a("font-awesome-icon",{attrs:{icon:["fas","key"]}})],1)])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.failLogin,expression:"failLogin"}],staticClass:"message is-danger"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Nom d'utilisateur ou mot de passe incorrecte ")])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.backError,expression:"backError"}],staticClass:"message is-danger"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Une erreur interne est survenue, veuillez réessayer dans quelques instants ")])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.isMobile(),expression:"isMobile()"}],staticClass:"message is-warning"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Attention ce site web n'est pas optimisé pour votre appareil ! ")])]),e._m(0)])},$=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login__form--footer"},[a("button",{staticClass:"button is-success is-fullwidth is-size-6",attrs:{id:"login",type:"submit"}},[e._v("Se connecter")])])}],k=a("bee2"),j=function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(b["a"])(this,a),e=t.apply(this,arguments),e.form={email:"",password:""},e.user={id:null,email:"",password:"",token:"",admin:!1,temporaryPassword:!1},e.failLogin=!1,e.backError=!1,e}return Object(k["a"])(a,[{key:"mounted",value:function(){window.localStorage.clear()}},{key:"loginForm",value:function(e){var t=this,a=document.getElementById("login");a&&(a.className+=" control is-loading",e.preventDefault(),this.$api.post("/auth/login",this.form).then((function(e){t.user.id=e.data.user.id,t.user.email=e.data.user.email,t.user.token=e.data.token,t.user.admin=e.data.user.admin,t.user.temporaryPassword=e.data.user.temporaryPassword,e.data.auth?(t.$store.dispatch("login",t.user),t.user.temporaryPassword?t.$router.push("/mainpage/verify"):t.$router.push("/mainpage/dashboard")):(t.failLogin=!0,a.classList.remove("control","is-loading"))})).catch((function(e){e.response&&400===e.response.status?t.failLogin=!0:t.backError=!0,a.classList.remove("control","is-loading")})))}},{key:"isMobile",value:function(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(navigator.userAgent.substr(0,4))}}]),a}(w["d"]);j=Object(C["a"])([w["a"]],j);var O=j,x=O,D=(a("a7ab"),Object(c["a"])(x,_,$,!1,null,"079dce4c",null)),A=D.exports,E=function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(b["a"])(this,a),t.apply(this,arguments)}return a}(w["d"]);E=Object(C["a"])([Object(w["a"])({components:{LoginForm:A}})],E);var P=E,N=P,M=(a("f036"),Object(c["a"])(N,f,h,!1,null,"9155e3a8",null)),U=M.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard"},[a("DashboardLayout")],1)},z=[],I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"cart section--1 has-text-left"},[a("aside",{staticClass:"cart__menu menu"},[a("p",{staticClass:"menu-label"},[e._v(" Panier ")]),a("ul",{staticClass:"menu-list"},e._l(e.cart,(function(e,t){return a("CartItem",{key:e.ref,attrs:{identifier:t,name:e.name,version:e.version,reference:e.reference}})})),1)]),a("div",{staticClass:"cart__command control field has-icons-right "},[a("input",{staticClass:"button is-success is-fullwidth is-size-6",attrs:{disabled:e.checkEmpty,type:"button",value:"Commander"},on:{click:e.popModal}}),a("span",{staticClass:"icon is-small is-right"},[a("font-awesome-icon",{attrs:{icon:["fas","shopping-cart"]}})],1)]),a("Modal",{ref:"commandModal",attrs:{id:"command"},scopedSlots:e._u([{key:"header",fn:function(){return[a("p",{staticClass:"modal-card-title"},[e._v("Cart")])]},proxy:!0},{key:"body",fn:function(){return[e._l(e.cart,(function(t,s){return a("CartItem",{key:t.ref,attrs:{identifier:s,name:t.name,version:t.version,reference:t.reference}},[a("div",{staticClass:"cart__modal--item"},[e._v(" "+e._s(t.name)+" "),a("label",[a("input",{staticClass:"input",attrs:{id:"datepicker"+s,type:"text",required:"",placeholder:"date de réservation"}})])])])})),a("article",{directives:[{name:"show",rawName:"v-show",value:e.backSuccess,expression:"backSuccess"}],staticClass:"message is-success"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Votre commande à bien été effectuée vous allez être redirigé vers la page d'acceuil ")])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.fixValidation<e.litepickers.length,expression:"fixValidation < litepickers.length"}],staticClass:"message is-danger"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Des champs requis sont manquants, veuillez les completer ")])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.backError,expression:"backError"}],staticClass:"message is-danger"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Une erreur interne est survenue, veuillez réessayer dans quelques instants ")])]),a("input",{staticClass:"button is-success is-fullwidth is-size-6",attrs:{disabled:e.fixValidation<e.litepickers.length,type:"button",value:"Commander"},on:{click:e.command}})]},proxy:!0}])})],1)},S=[],L=(a("4160"),a("a15b"),a("d81d"),a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._t("default",[a("li",[a("a",{staticClass:"control has-icons-right fail--hover"},[e._v(" "+e._s(e.name)+" "),a("span",{staticClass:"icon is-small is-right is-pointer",on:{click:e.remFromCart}},[a("font-awesome-icon",{attrs:{icon:["fas","trash-alt"]}})],1)])])])],2)}),T=[],F=(a("b0c0"),function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(b["a"])(this,a),e=t.apply(this,arguments),e.item={identifier:e.identifier,name:e.name,version:e.version,reference:e.reference},e}return Object(k["a"])(a,[{key:"remFromCart",value:function(){this.$store.dispatch("remFromCart",this.item)}}]),a}(w["d"]));Object(C["a"])([Object(w["b"])()],F.prototype,"identifier",void 0),Object(C["a"])([Object(w["b"])()],F.prototype,"name",void 0),Object(C["a"])([Object(w["b"])()],F.prototype,"version",void 0),Object(C["a"])([Object(w["b"])()],F.prototype,"reference",void 0),F=Object(C["a"])([w["a"]],F);var R=F,B=R,V=(a("c3f3"),Object(c["a"])(B,L,T,!1,null,"18e6796b",null)),Y=V.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal",attrs:{id:this.id}},[a("div",{staticClass:"modal-background modal__background"}),a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[e._t("header"),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:e.depopModal}})],2),a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"modal__body"},[e._t("body")],2)])])])},J=[],G=function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(b["a"])(this,a),t.apply(this,arguments)}return Object(k["a"])(a,[{key:"popModal",value:function(){var e=document.getElementById(this.id);e&&(e.className+=" is-active")}},{key:"depopModal",value:function(){var e=document.getElementById(this.id);e&&e.classList.remove("is-active")}}]),a}(w["d"]);Object(C["a"])([Object(w["b"])()],G.prototype,"id",void 0),G=Object(C["a"])([w["a"]],G);var K=G,Q=K,W=(a("ddf4"),Object(c["a"])(Q,H,J,!1,null,"7a66b4ed",null)),X=W.exports,Z=a("5360"),ee=a.n(Z);function te(e){return{"x-access-token":e}}var ae=a("b5ae"),se=function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(b["a"])(this,a),e=t.apply(this,arguments),e.cart=e.$store.state.cart.items,e.user=e.$store.state.auth.user,e.litepickers=[],e.fixValidation=0,e.backError=!1,e.backSuccess=!1,e}return Object(k["a"])(a,[{key:"popModal",value:function(){var e=this;this.commandModal.popModal(),this.backSuccess=!1,this.backError=!1,this.litepickers.map((function(e){e.destroy()})),this.litepickers.length=0,this.cart.forEach((function(t,a){t.loanDays=[],e.litepickers.push(new ee.a({element:document.getElementById("datepicker"+a),format:"D MMMM YYYY",lang:"fr-FR",numberOfMonths:2,numberOfColumns:2,minDate:new Date,singleMode:!1,lockDays:t.lockDays,disallowLockDaysInRange:!0,onSelect:function(a,s){t.loanDays=e.datesToString(a,s),e.fixValidation++}}))}))}},{key:"datesToString",value:function(e,t){var a=e.getFullYear(),s=e.getMonth()+1,i=e.getDate(),r=[a,(s>9?"":"0")+s,(i>9?"":"0")+i].join("-"),o=t.getFullYear(),n=t.getMonth()+1,c=t.getDate(),l=[o,(n>9?"":"0")+n,(c>9?"":"0")+c].join("-");return[r,l]}},{key:"command",value:function(){var e=this;this.$api.post("/devices/borrow/"+this.user.id,{commands:this.cart},{headers:te(this.user.token)}).then((function(){e.backSuccess=!0,setTimeout((function(){e.$store.dispatch("clearCart"),window.location.reload()}),4500),setTimeout((function(){window.location.reload()}),5e3)})).catch((function(t){console.log(e.cart),console.log(t.response.data),e.backError=!0}))}},{key:"checkEmpty",get:function(){return!this.cart.length}}]),a}(w["d"]);Object(C["a"])([Object(w["c"])()],se.prototype,"commandModal",void 0),se=Object(C["a"])([Object(w["a"])({components:{CartItem:Y,Modal:X},validations:{cart:{required:ae["required"],$each:{loanDays:{required:ae["required"]}}}}})],se);var ie=se,re=ie,oe=(a("f118"),Object(c["a"])(re,I,S,!1,null,"b06074a0",null)),ne=oe.exports,ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"mainpanel section--1"},[a("div",{staticClass:"mainpanel__searchbar section--1 box"},[a("div",{staticClass:"mainpanel__searchbar--bar"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.formSearch.search,expression:"formSearch.search"}],staticClass:"input is-rounded",attrs:{type:"text",placeholder:"Rechercher un appareil par "+e.formSearch.searchMode},domProps:{value:e.formSearch.search},on:{input:function(t){t.target.composing||e.$set(e.formSearch,"search",t.target.value)}}})])]),a("div",{staticClass:"mainpanel__searchbar--filters"},e._l(e.filters,(function(t){return a("div",{key:t.name,staticClass:"field"},[a("label",{staticClass:"radio filter label is-size-7 has-text-left"},[a("input",{attrs:{type:"radio",name:"filter"},domProps:{checked:t.auto,value:t.name},on:{click:e.changeSearchType}}),e._v(" "+e._s(t.name)+" ")])])})),0),a("article",{directives:[{name:"show",rawName:"v-show",value:e.backError,expression:"backError"}],staticClass:"message is-danger"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Une erreur interne est survenue, veuillez réessayer dans quelques instants ")])])]),a("div",{staticClass:"mainpanel__devicelist"},[e.user.admin?a("div",{staticClass:"mainpanel__devicelist--options"},[a("button",{staticClass:"button  is-size-7 is-primary is-inverted",on:{click:e.popCategoryModal}},[e._v(" Ajouter categorie "),a("span",{staticClass:"icon is-small"},[a("font-awesome-icon",{attrs:{icon:["fas","folder-plus"]}})],1)]),a("button",{staticClass:"button is-size-7 is-primary is-inverted",on:{click:e.popDeviceModal}},[e._v(" Ajouter appareil "),a("span",{staticClass:"icon is-small"},[a("font-awesome-icon",{attrs:{icon:["fas","plus-square"]}})],1)]),a("Modal",{ref:"addCategoryModal",attrs:{id:"addCatModal"},scopedSlots:e._u([{key:"header",fn:function(){return[a("p",{staticClass:"modal-card-title"},[e._v("Ajouter une catégorie")])]},proxy:!0},{key:"body",fn:function(){return[a("div",{staticClass:"modal__body--wrapper"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.formAddCategory.name.$model,expression:"$v.formAddCategory.name.$model"}],staticClass:"input",attrs:{type:"text",placeholder:"Ordinateurs, téléphones..."},domProps:{value:e.$v.formAddCategory.name.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.formAddCategory.name,"$model",t.target.value)}}})])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.backCategoryUpdate,expression:"backCategoryUpdate"}],staticClass:"message is-info"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Mise à jour... ")])]),a("article",{directives:[{name:"show",rawName:"v-show",value:!e.$v.formAddCategory.name.required,expression:"!$v.formAddCategory.name.required"}],staticClass:"message is-danger"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Le nom de la catégorie est obligatoire ")])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.backCategoryError,expression:"backCategoryError"}],staticClass:"message is-danger"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" "+e._s(e.backCategoryErrorMsg)+" ")])]),a("input",{staticClass:"button is-success is-fullwidth is-size-6",attrs:{disabled:e.$v.formAddCategory.name.$invalid,type:"button",value:"Enregistrer"},on:{click:e.addCategory}})]},proxy:!0}],null,!1,2530859853)}),a("Modal",{ref:"addDeviceModal",attrs:{id:"addDevModal"},scopedSlots:e._u([{key:"header",fn:function(){return[a("p",{staticClass:"modal-card-title"},[e._v("Ajouter un appareil")])]},proxy:!0},{key:"body",fn:function(){return[a("div",{staticClass:"modal__body--wrapper"},[a("div",{staticClass:"field"},[a("div",{staticClass:"control has-icons-left"},[a("div",{class:"select"+e.isInputInvalid(e.$v.formAddDevice.category.$invalid)},[a("label",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.$v.formAddDevice.category.$model,expression:"$v.formAddDevice.category.$model"}],attrs:{required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.$v.formAddDevice.category,"$model",t.target.multiple?a:a[0])}}},[a("option",{attrs:{selected:"",disabled:"",value:""}},[e._v("Catégorie")]),e._l(e.categories,(function(t){return a("option",{key:t.name},[e._v(" "+e._s(t.name)+" ")])}))],2)])]),a("div",{staticClass:"icon is-small is-left"},[a("font-awesome-icon",{attrs:{icon:["fas","folder"]}})],1)])])]),a("div",{staticClass:"modal__body--wrapper"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.formAddDevice.name.$model,expression:"$v.formAddDevice.name.$model"}],class:"input"+e.isInputInvalid(e.$v.formAddDevice.name.$invalid),attrs:{type:"text",required:"",placeholder:"Nom de l'appareil"},domProps:{value:e.$v.formAddDevice.name.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.formAddDevice.name,"$model",t.target.value)}}})])]),a("div",{staticClass:"modal__body--wrapper"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.formAddDevice.ref.$model,expression:"$v.formAddDevice.ref.$model"}],class:"input left"+e.isInputInvalid(e.$v.formAddDevice.ref.$invalid),attrs:{type:"text",required:"",placeholder:"Référence"},domProps:{value:e.$v.formAddDevice.ref.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.formAddDevice.ref,"$model",t.target.value)}}})]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.formAddDevice.version.$model,expression:"$v.formAddDevice.version.$model"}],staticClass:"input right",class:"input right"+e.isInputInvalid(e.$v.formAddDevice.version.$invalid),attrs:{type:"text",required:"",placeholder:"Version"},domProps:{value:e.$v.formAddDevice.version.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.formAddDevice.version,"$model",t.target.value)}}})])]),a("div",{staticClass:"modal__body--wrapper"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.formAddDevice.photo.$model,expression:"$v.formAddDevice.photo.$model"}],class:"input left"+e.isInputInvalid(e.$v.formAddDevice.photo.$invalid),attrs:{type:"url",required:"",placeholder:"URL de l'image (optionnel)"},domProps:{value:e.$v.formAddDevice.photo.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.formAddDevice.photo,"$model",t.target.value)}}})]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.formAddDevice.phone.$model,expression:"$v.formAddDevice.phone.$model"}],class:"input right"+e.isInputInvalid(e.$v.formAddDevice.phone.$invalid),attrs:{type:"tel",required:"",placeholder:"Numéro de téléphone (optionnel)"},domProps:{value:e.$v.formAddDevice.phone.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.formAddDevice.phone,"$model",t.target.value)}}})])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.backDeviceUpdate,expression:"backDeviceUpdate"}],staticClass:"message is-info"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Mise à jour... ")])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.$v.formAddDevice.$invalid,expression:"$v.formAddDevice.$invalid"}],staticClass:"message is-danger"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Les champs saisis sont incorrects ")])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.backDeviceError,expression:"backDeviceError"}],staticClass:"message is-danger"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" "+e._s(e.backDeviceErrorMsg)+" ")])]),a("input",{staticClass:"button is-success is-fullwidth is-size-6",attrs:{disabled:e.$v.formAddDevice.$invalid,type:"button",value:"Enregistrer"},on:{click:e.addDevice}})]},proxy:!0}],null,!1,4249085386)})],1):e._e(),e._l(e.searchedCategories,(function(t){return a("DeviceCategoryLayout",{key:t.name,attrs:{title:t.name,categoryid:t.ID}},[e.fixSearchCategories>=3?a("div",e._l(t.devices,(function(e){return a("Device",{key:e.name,attrs:{name:e.name,category:t.name,reference:e.ref,version:e.version,phone:e.phone,lockDays:e.lockDays,photo:e.photo}})})),1):e._e()])}))],2)])},le=[],de=(a("4de4"),a("c975"),a("ac1f"),a("841c"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"deviceCategory has-text-left",on:{mouseover:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1}}},[a("div",{staticClass:"deviceCategory__header"},[a("h5",{staticClass:"title is-5"},[e._v(e._s(e.title))]),e.user.admin?a("span",{directives:[{name:"show",rawName:"v-show",value:e.hover,expression:"hover"}],staticClass:"icon is-small is-pointer fail",on:{click:e.remCategory}},[a("font-awesome-icon",{attrs:{icon:["fas","trash-alt"]}})],1):e._e(),e.loading?a("span",{directives:[{name:"show",rawName:"v-show",value:e.hover,expression:"hover"}],staticClass:"icon is-small is-pointer success"},[a("font-awesome-icon",{attrs:{spin:"",icon:["fas","cog"]}})],1):e._e()]),a("div",{staticClass:"deviceCategory__container"},[a("article",{directives:[{name:"show",rawName:"v-show",value:e.backError,expression:"backError"}],staticClass:"message is-danger"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Une erreur interne est survenue, veuillez réessayer dans quelques instants ")])]),e._t("default")],2)])}),ue=[],me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"device"},[a("div",{staticClass:"device__wrapper"},[a("div",{staticClass:"device__wrapper--line",on:{click:e.popModal}},[a("div",{staticClass:"device__info"},[e._v(e._s(e.name))]),a("div",{staticClass:"device__info"},[e._v(e._s(e.reference))]),a("div",{staticClass:"device__info"},[a("span",{directives:[{name:"show",rawName:"v-show",value:""!==e.phone,expression:"phone !== ''"}],staticClass:"is-size-6 has-text-left"},[e._v(" "+e._s(e.phone)+" ")]),a("span",{directives:[{name:"show",rawName:"v-show",value:""===e.phone,expression:"phone === ''"}],staticClass:"icon is-small fail"},[a("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)])]),a("div",{staticClass:"device__info"},[a("button",{staticClass:"button is-primary is-inverted",attrs:{disabled:e.isInCart},on:{click:e.addToCart}},[e._v(" Ajouter au panier "),a("span",{staticClass:"icon is-small"},[a("font-awesome-icon",{attrs:{icon:["fas","plus"]}})],1)])])]),a("Modal",{ref:"deviceInfoModal",attrs:{id:e.reference},scopedSlots:e._u([{key:"header",fn:function(){return[a("p",{staticClass:"modal-card-title"},[e._v(e._s(e.category))]),a("p",{staticClass:"modal-card-title"},[e._v(e._s(e.name))]),a("div",{staticClass:"modal__sim"},[a("label",{staticClass:"label is-size-7 has-text-left"},[e._v("Téléphone : ")]),a("span",{directives:[{name:"show",rawName:"v-show",value:""!==e.phone,expression:"phone !== ''"}],staticClass:"is-size-7 has-text-left"},[e._v(" "+e._s(e.phone)+" ")]),a("span",{directives:[{name:"show",rawName:"v-show",value:""===e.phone,expression:"phone === ''"}],staticClass:"icon is-small fail"},[a("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)])]},proxy:!0},{key:"body",fn:function(){return[a("div",{staticClass:"modal__body--wrapper"},[a("div",{staticClass:"modal__body--info"},[e._v(e._s(e.name))]),a("div",{staticClass:"modal__body--info"},[e._v(e._s(e.version))]),a("div",{staticClass:"modal__body--info"},[e._v(e._s(e.reference))])]),a("p",{directives:[{name:"show",rawName:"v-show",value:""!==e.photo,expression:"photo !== ''"}],staticClass:"image is-4by3 modal__body--wrapper"},[a("img",{attrs:{src:e.photo,alt:"Photo de l'appareil"}})]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.backUpdate,expression:"backUpdate"}],staticClass:"message is-info has-text-centered"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Mise à jour... ")])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.backError,expression:"backError"}],staticClass:"message is-danger has-text-centered"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Une erreur interne est survenue, veuillez réessayer dans quelques instants ")])]),e.user.admin?a("div",{staticClass:"modal__body--footer"},[a("div",{staticClass:"modal__body--info"},[a("input",{staticClass:"button is-danger",attrs:{type:"button",value:"Supprimer"},on:{click:e.deleteDevice}})])]):e._e()]},proxy:!0}])})],1)},ve=[],pe=a("b85c"),fe=function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(b["a"])(this,a),e=t.apply(this,arguments),e.user=e.$store.state.auth.user,e.cart=e.$store.state.cart.items,e.item={identifier:null,name:e.name,version:e.version,reference:e.reference,lockDays:e.lockDays,phone:e.phone},e.backError=!1,e.backUpdate=!1,e}return Object(k["a"])(a,[{key:"deleteDevice",value:function(){var e=this;this.$api.delete("/devices/delete/"+this.item.reference,{headers:te(this.user.token)}).then((function(){e.backUpdate=!0,setTimeout((function(){e.backUpdate=!1,window.location.reload()}),1e3)})).catch((function(){e.backError=!0}))}},{key:"addToCart",value:function(){this.isInCart||this.$store.dispatch("addToCart",this.item)}},{key:"popModal",value:function(){this.backError=!1,this.backUpdate=!1,this.deviceInfoModal.popModal()}},{key:"isInCart",get:function(){var e,t=Object(pe["a"])(this.cart);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a.reference===this.reference)return!0}}catch(s){t.e(s)}finally{t.f()}return!1}}]),a}(w["d"]);Object(C["a"])([Object(w["b"])()],fe.prototype,"name",void 0),Object(C["a"])([Object(w["b"])()],fe.prototype,"category",void 0),Object(C["a"])([Object(w["b"])()],fe.prototype,"reference",void 0),Object(C["a"])([Object(w["b"])()],fe.prototype,"version",void 0),Object(C["a"])([Object(w["b"])()],fe.prototype,"phone",void 0),Object(C["a"])([Object(w["b"])()],fe.prototype,"lockDays",void 0),Object(C["a"])([Object(w["b"])()],fe.prototype,"photo",void 0),Object(C["a"])([Object(w["c"])()],fe.prototype,"deviceInfoModal",void 0),fe=Object(C["a"])([Object(w["a"])({components:{Modal:X}})],fe);var he=fe,be=he,ge=(a("b758"),Object(c["a"])(be,me,ve,!1,null,"3120ab4d",null)),ye=ge.exports,Ce=function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(b["a"])(this,a),e=t.apply(this,arguments),e.user=e.$store.state.auth.user,e.hover=!1,e.loading=!1,e.backError=!1,e}return Object(k["a"])(a,[{key:"remCategory",value:function(){var e=this;this.loading=!0,this.$api.delete("/category/delete/"+this.categoryid,{headers:te(this.user.token)}).then((function(){e.$api.get("/devices/all",{headers:te(e.user.token)}).then((function(t){e.$store.dispatch("initDevices",t.data)})).catch((function(){e.backError=!0})),e.loading=!0,setTimeout((function(){e.loading=!1,window.location.reload()}),1e3)})).catch((function(){e.backError=!0}))}}]),a}(w["d"]);Object(C["a"])([Object(w["b"])()],Ce.prototype,"title",void 0),Object(C["a"])([Object(w["b"])()],Ce.prototype,"categoryid",void 0),Ce=Object(C["a"])([Object(w["a"])({components:{Device:ye}})],Ce);var we=Ce,_e=we,$e=(a("9227"),Object(c["a"])(_e,de,ue,!1,null,"28a39802",null)),ke=$e.exports,je=function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(b["a"])(this,a),e=t.apply(this,arguments),e.filters=e.$store.state.web.filters,e.categories=e.$store.state.devices.categories,e.user=e.$store.state.auth.user,e.fixSearchCategories=1,e.backError=!1,e.backCategoryUpdate=!1,e.backDeviceUpdate=!1,e.backDeviceError=!1,e.backCategoryError=!1,e.backDeviceErrorMsg="",e.backCategoryErrorMsg="",e.formSearch={search:"",searchMode:"nom"},e.formAddCategory={name:""},e.formAddDevice={name:"",category:"",ref:"",version:"",photo:"",phone:""},e}return Object(k["a"])(a,[{key:"isInputInvalid",value:function(e){return e?" is-danger":""}},{key:"mounted",value:function(){var e=this;this.$api.get("/devices/all",{headers:te(this.user.token)}).then((function(t){e.$store.dispatch("initDevices",t.data)})).catch((function(t){console.log(t.response.data),e.backError=!0}))}},{key:"popCategoryModal",value:function(){this.addCategoryModal.popModal()}},{key:"popDeviceModal",value:function(){this.addDeviceModal.popModal()}},{key:"addCategory",value:function(){var e,t=this;null!==(e=this.$v.formAddCategory.name)&&void 0!==e&&e.$invalid||this.$api.put("/category/add/"+this.formAddCategory.name,{},{headers:te(this.user.token)}).then((function(){t.backCategoryError=!1,t.backCategoryUpdate=!0,setTimeout((function(){t.backCategoryUpdate=!1,window.location.reload()}),1e3)})).catch((function(e){e.response&&"Category name already exists"===e.response.data.message?(t.backCategoryError=!0,t.backCategoryErrorMsg="Cette catégorie existe déjà, veuillez en choisir une autre"):t.backError=!0}))}},{key:"addDevice",value:function(){var e=this;this.$v.formAddDevice.$invalid||this.$api.put("/devices/add",this.formAddDevice,{headers:te(this.user.token)}).then((function(){e.backDeviceError=!1,e.backDeviceUpdate=!0,setTimeout((function(){e.backDeviceUpdate=!1,window.location.reload()}),1e3)})).catch((function(t){t.response&&"Device reference is already used"===t.response.data.message?(e.backDeviceError=!0,e.backDeviceErrorMsg="Cette référence existe déjà, veuillez en choisir une autre"):e.backError=!0}))}},{key:"changeSearchType",value:function(e){this.formSearch.searchMode=e.target.getAttribute("value")}},{key:"searchedCategories",get:function(){var e=this.formSearch.search,t=this.categories;if(this.fixSearchCategories++,!e)return t;if(e=e.toLowerCase(),"nom"===this.formSearch.searchMode){var a=[];t.map((function(t){var s=t.devices.filter((function(t){if(-1!==t.name.toLowerCase().indexOf(e))return t}));if(null!==s&&void 0!==s&&s.length){var i={};i.ID=t.ID,i.name=t.name,i.devices=s,a.push(i)}})),t=a}else if("catégorie"===this.formSearch.searchMode)t=t.filter((function(t){if(-1!==t.name.toLowerCase().indexOf(e))return t}));else if("référence"===this.formSearch.searchMode){var s=[];t.map((function(t){var a=t.devices.filter((function(t){if(-1!==t.ref.toLowerCase().indexOf(e))return t}));if(null!==a&&void 0!==a&&a.length){var i={};i.ID=t.ID,i.name=t.name,i.devices=a,s.push(i)}})),t=s}return t}}]),a}(w["d"]);Object(C["a"])([Object(w["c"])()],je.prototype,"addCategoryModal",void 0),Object(C["a"])([Object(w["c"])()],je.prototype,"addDeviceModal",void 0),je=Object(C["a"])([Object(w["a"])({components:{Device:ye,DeviceCategoryLayout:ke,Modal:X},validations:{formAddCategory:{name:{required:ae["required"]}},formAddDevice:{name:{required:ae["required"]},category:{required:ae["required"]},ref:{required:ae["required"],minLength:Object(ae["minLength"])(5),maxLength:Object(ae["maxLength"])(5)},version:{required:ae["required"],minLength:Object(ae["minLength"])(3)},photo:{url:ae["url"]},phone:{numeric:ae["numeric"],maxLength:Object(ae["maxLength"])(7)}}}})],je);var Oe=je,xe=Oe,De=(a("0904"),Object(c["a"])(xe,ce,le,!1,null,"2f97096e",null)),Ae=De.exports,Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboardLayout"},[a("MainPanelLayout"),a("CartLayout")],1)},Pe=[],Ne=function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(b["a"])(this,a),t.apply(this,arguments)}return a}(w["d"]);Ne=Object(C["a"])([Object(w["a"])({components:{MainPanelLayout:Ae,CartLayout:ne,MainPanel:Ae}})],Ne);var Me=Ne,Ue=Me,qe=(a("7893"),Object(c["a"])(Ue,Ee,Pe,!1,null,"36bf6181",null)),ze=qe.exports,Ie=function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(b["a"])(this,a),e=t.apply(this,arguments),e.user=e.$store.state.auth.user,e}return a}(w["d"]);Ie=Object(C["a"])([Object(w["a"])({components:{DashboardLayout:ze,MainPanelLayout:Ae,CartComponent:ne}})],Ie);var Se=Ie,Le=Se,Te=(a("9fe4"),Object(c["a"])(Le,q,z,!1,null,"f7291770",null)),Fe=Te.exports,Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mainpage"},[e.user.temporaryPassword?e._e():a("div",{staticClass:"mainpage__header"},[a("NavBar")],1),a("div",{staticClass:"mainpage__body"},[a("router-view")],1)])},Be=[],Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"navbar",attrs:{role:"navigation","aria-label":"main navigation"}},[e._m(0),a("div",{staticClass:"navbar-menu",attrs:{id:"navbarBasicExample"}},[a("div",{staticClass:"navbar-start"},[e.user.admin?a("a",{staticClass:"navbar-item"},[a("router-link",{attrs:{to:"/mainpage/dashboard"}},[e._v("Dashboard")])],1):e._e(),e.user.admin?a("a",{staticClass:"navbar-item"},[a("router-link",{attrs:{to:"/mainpage/users"}},[e._v("Utilisateurs")])],1):e._e()]),a("div",{staticClass:"navbar-end"},[a("div",{staticClass:"navbar-item"},[a("button",{staticClass:"button is-link navbar-logout",on:{click:e.logout}},[e._v("Se déconnecter")])])])])])},Ye=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"navbar-brand"},[a("a",{staticClass:"navbar-item",attrs:{href:"https://github.com/skatos-ux/Loaner"}},[a("img",{attrs:{alt:"logo",src:"https://upload.wikimedia.org/wikipedia/commons/f/f0/Logo_Reseau_Polytech.svg",width:"50",height:"56"}})])])}],He=function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(b["a"])(this,a),e=t.apply(this,arguments),e.user=e.$store.state.auth.user,e}return Object(k["a"])(a,[{key:"logout",value:function(){this.$store.dispatch("logout"),this.$router.push("/")}}]),a}(w["d"]);He=Object(C["a"])([w["a"]],He);var Je=He,Ge=Je,Ke=(a("c36d"),Object(c["a"])(Ge,Ve,Ye,!1,null,"6fe39f75",null)),Qe=Ke.exports,We=function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(b["a"])(this,a),e=t.apply(this,arguments),e.user=e.$store.state.auth.user,e}return Object(k["a"])(a,[{key:"mounted",value:function(){this.user.logged||this.$router.push("/")}}]),a}(w["d"]);We=Object(C["a"])([Object(w["a"])({components:{NavBar:Qe}})],We);var Xe=We,Ze=Xe,et=(a("4139"),Object(c["a"])(Ze,Re,Be,!1,null,"62f78d0b",null)),tt=et.exports,at=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"users"},[a("UsersLayout")],1)},st=[],it=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"users section--1"},[a("div",{staticClass:"users__searchbar section--1 box"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"input is-rounded",attrs:{type:"text",placeholder:"Rechercher un nom de famille"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}})])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.backError,expression:"backError"}],staticClass:"message is-danger"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Une erreur interne est survenue, veuillez réessayer dans quelques instants ")])]),a("div",{staticClass:"users__userslist"},[a("div",{staticClass:"users__userslist--options"},[a("button",{staticClass:"button  is-size-7 is-primary is-inverted",on:{click:e.popUserModal}},[e._v(" Ajouter un utilisateur "),a("span",{staticClass:"icon is-small"},[a("font-awesome-icon",{attrs:{icon:["fas","user-plus"]}})],1)]),a("Modal",{ref:"addAdminModal",attrs:{id:"addAdminModal"},scopedSlots:e._u([{key:"header",fn:function(){return[a("p",{staticClass:"modal-card-title"},[e._v("Ajouter un utilisateur")])]},proxy:!0},{key:"body",fn:function(){return[a("div",{staticClass:"modal__body--wrapper"},[a("label",{staticClass:"left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.formAddUser.id.$model,expression:"$v.formAddUser.id.$model"}],class:"input "+e.isInputInvalid(e.$v.formAddUser.id.$invalid),attrs:{type:"text",placeholder:"Matricule"},domProps:{value:e.$v.formAddUser.id.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.formAddUser.id,"$model",t.target.value)}}})]),a("label",{staticClass:"middle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.formAddUser.firstName.$model,expression:"$v.formAddUser.firstName.$model"}],class:"input "+e.isInputInvalid(e.$v.formAddUser.firstName.$invalid),attrs:{type:"text",placeholder:"Prénom"},domProps:{value:e.$v.formAddUser.firstName.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.formAddUser.firstName,"$model",t.target.value)}}})]),a("label",{staticClass:"middle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.formAddUser.lastName.$model,expression:"$v.formAddUser.lastName.$model"}],class:"input "+e.isInputInvalid(e.$v.formAddUser.lastName.$invalid),attrs:{type:"text",placeholder:"Nom"},domProps:{value:e.$v.formAddUser.lastName.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.formAddUser.lastName,"$model",t.target.value)}}})]),a("label",{staticClass:"middle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.formAddUser.email.$model,expression:"$v.formAddUser.email.$model"}],class:"input "+e.isInputInvalid(e.$v.formAddUser.email.$invalid),attrs:{type:"email",placeholder:"Email"},domProps:{value:e.$v.formAddUser.email.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.formAddUser.email,"$model",t.target.value)}}})]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.formAddUser.admin.$model,expression:"$v.formAddUser.admin.$model"}],staticClass:"switch right",attrs:{id:"switchExample",type:"checkbox"},domProps:{checked:Array.isArray(e.$v.formAddUser.admin.$model)?e._i(e.$v.formAddUser.admin.$model,null)>-1:e.$v.formAddUser.admin.$model},on:{change:function(t){var a=e.$v.formAddUser.admin.$model,s=t.target,i=!!s.checked;if(Array.isArray(a)){var r=null,o=e._i(a,r);s.checked?o<0&&e.$set(e.$v.formAddUser.admin,"$model",a.concat([r])):o>-1&&e.$set(e.$v.formAddUser.admin,"$model",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(e.$v.formAddUser.admin,"$model",i)}}}),a("label",{staticClass:"middle",attrs:{for:"switchExample"}},[e._v("Administrateur")])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.backUserAddedSuccess,expression:"backUserAddedSuccess"}],staticClass:"message is-success"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" L'utilisateur à été ajouté avec succès son mot de passe est : "+e._s(e.temporaryPassword)+" ")])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.backUpdate,expression:"backUpdate"}],staticClass:"message is-info"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Mise à jour... ")])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.$v.formAddUser.$invalid,expression:"$v.formAddUser.$invalid"}],staticClass:"message is-danger"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Les champs saisis sont incorrects ")])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.backUserAddedError,expression:"backUserAddedError"}],staticClass:"message is-danger"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" "+e._s(e.errorMsg)+" ")])]),a("input",{staticClass:"button is-success is-fullwidth is-size-6",attrs:{disabled:e.$v.formAddUser.$invalid,type:"button",value:"Enregistrer"},on:{click:e.addUser}})]},proxy:!0}])})],1),e._l(e.searchedUsers,(function(e){return a("User",{key:e.name,attrs:{identifier:e.id,firstName:e.firstName,lastName:e.lastName,email:e.email,admin:e.admin}})}))],2)])},rt=[],ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[a("div",{staticClass:"user__wrapper"},[a("div",{staticClass:"user__wrapper--line",on:{click:e.popModal}},[a("div",{staticClass:"user__info"},[e._v(e._s(e.identifier))]),a("div",{staticClass:"user__info"},[e._v(e._s(e.firstName))]),a("div",{staticClass:"user__info"},[e._v(e._s(e.lastName))]),a("div",{staticClass:"user__info"},[e._v(e._s(e.email))])]),a("div",{staticClass:"user__info"},[e.user.id!==e.identifier?a("span",{staticClass:"icon is-small is-pointer fail",on:{click:e.remUser}},[a("font-awesome-icon",{attrs:{icon:["fas","trash-alt"]}})],1):e._e(),a("span",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"icon is-small is-pointer success"},[a("font-awesome-icon",{attrs:{spin:"",icon:["fas","cog"]}})],1)])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.backError,expression:"backError"}],staticClass:"message is-danger"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Une erreur interne est survenue lors de la suppression de l'utilisateur, veuillez réessayer dans quelques instants ")])]),a("Modal",{ref:"userInfoModal",attrs:{id:e.identifier},scopedSlots:e._u([{key:"header",fn:function(){return[a("p",{staticClass:"modal-card-title"},[e._v("Historique")])]},proxy:!0},{key:"body",fn:function(){return[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[e._v("Référence")]),a("th",[e._v("Référence de l'appareil")]),a("th",[e._v("Dates d'emprunts")])])]),a("tbody",e._l(e.reservations,(function(e){return a("HistoryItem",{key:e.id,attrs:{"reservation-id":e.ID,"id-device":e.refDevice,"loan-dates":[e.startDate,e.endDate,e.returnDate]}})})),1)])]},proxy:!0}])})],1)},nt=[],ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("th",[e._v(e._s(e.reservationId))]),a("th",[e._v(e._s(e.idDevice))]),a("th",[e._v(e._s(e.startDate)+", "+e._s(e.endDate))])])},lt=[],dt=function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(b["a"])(this,a),e=t.apply(this,arguments),e.startDate=e.loanDates[0],e.endDate=e.loanDates[1],e}return Object(k["a"])(a,[{key:"mounted",value:function(){this.loanDates[3]&&(this.endDate=this.loanDates[3])}}]),a}(w["d"]);Object(C["a"])([Object(w["b"])()],dt.prototype,"reservationId",void 0),Object(C["a"])([Object(w["b"])()],dt.prototype,"idDevice",void 0),Object(C["a"])([Object(w["b"])()],dt.prototype,"loanDates",void 0),dt=Object(C["a"])([w["a"]],dt);var ut=dt,mt=ut,vt=Object(c["a"])(mt,ct,lt,!1,null,"a4bb62c4",null),pt=vt.exports,ft=function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(b["a"])(this,a),e=t.apply(this,arguments),e.user=e.$store.state.auth.user,e.loading=!1,e.backError=!1,e.reservations=[],e}return Object(k["a"])(a,[{key:"popModal",value:function(){var e=this;this.$api.get("/users/"+this.identifier+"/history",{headers:te(this.user.token)}).then((function(t){e.reservations=t.data})).catch((function(t){console.log(t.response.data),e.loading=!1,e.backError=!0})),this.userInfoModal.popModal()}},{key:"remUser",value:function(){var e=this;this.$api.delete("/users/delete/"+this.identifier,{headers:te(this.user.token)}).then((function(){e.loading=!0,setTimeout((function(){e.loading=!1,window.location.reload()}),1e3)})).catch((function(){e.loading=!1,e.backError=!0}))}}]),a}(w["d"]);Object(C["a"])([Object(w["c"])()],ft.prototype,"userInfoModal",void 0),Object(C["a"])([Object(w["b"])()],ft.prototype,"identifier",void 0),Object(C["a"])([Object(w["b"])()],ft.prototype,"firstName",void 0),Object(C["a"])([Object(w["b"])()],ft.prototype,"lastName",void 0),Object(C["a"])([Object(w["b"])()],ft.prototype,"email",void 0),Object(C["a"])([Object(w["b"])()],ft.prototype,"admin",void 0),ft=Object(C["a"])([Object(w["a"])({components:{HistoryItem:pt,Modal:X}})],ft);var ht=ft,bt=ht,gt=(a("17c7"),Object(c["a"])(bt,ot,nt,!1,null,"2d70600a",null)),yt=gt.exports,Ct=function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(b["a"])(this,a),e=t.apply(this,arguments),e.user=e.$store.state.auth.user,e.users=[],e.search="",e.backUserAddedSuccess=!1,e.backUserAddedError=!1,e.backUpdate=!1,e.backError=!1,e.errorMsg="",e.temporaryPassword="",e.formAddUser={id:null,firstName:"",lastName:"",email:"",admin:!1,temporaryPassword:!0},e}return Object(k["a"])(a,[{key:"popUserModal",value:function(){this.addAdminModal.popModal()}},{key:"mounted",value:function(){var e=this;this.$api.get("/users/all",{headers:te(this.user.token)}).then((function(t){e.users=t.data})).catch((function(){e.backError=!0}))}},{key:"isInputInvalid",value:function(e){return e?" is-danger":""}},{key:"addUser",value:function(){var e=this;console.log(this.formAddUser),this.$v.formAddUser.$invalid||this.$api.put("/users/add",this.formAddUser,{headers:te(this.user.token)}).then((function(t){e.$api.get("/users/all",{headers:te(e.user.token)}).then((function(t){e.users=t.data})).catch((function(){e.backError=!0})),e.backUpdate=!0,setTimeout((function(){e.temporaryPassword=t.data.password,e.backUpdate=!1,e.backUserAddedSuccess=!0}),1e3)})).catch((function(t){console.log(t.response.data),t.response?"User with this ID already exists"===t.response.data.message?(e.backUserAddedError=!0,e.errorMsg="Un utilisateur existe déjà avec ce matricule, veuillez en choisir un autre"):"User with this email already exists"===t.response.data.message&&(e.backUserAddedError=!0,e.errorMsg="Un utilisateur existe déjà avec cet email, veuillez en choisir un autre"):e.backError=!0}))}},{key:"searchedUsers",get:function(){var e=this.search,t=this.users;return e?(e=e.toLowerCase(),t=t.filter((function(t){if(-1!==t.lastName.toLowerCase().indexOf(e))return t})),t):t}}]),a}(w["d"]);Object(C["a"])([Object(w["c"])()],Ct.prototype,"addAdminModal",void 0),Ct=Object(C["a"])([Object(w["a"])({components:{User:yt,Device:ye,Modal:X},validations:{formAddUser:{id:{required:ae["required"],alphaNum:ae["alphaNum"],minLength:Object(ae["minLength"])(7),maxLength:Object(ae["maxLength"])(7)},firstName:{required:ae["required"],alpha:ae["alpha"]},lastName:{required:ae["required"],alpha:ae["alpha"]},email:{required:ae["required"],email:ae["email"]},admin:{required:ae["required"]}}}})],Ct);var wt=Ct,_t=wt,$t=(a("53c9"),Object(c["a"])(_t,it,rt,!1,null,"33b91040",null)),kt=$t.exports,jt=function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(b["a"])(this,a),t.apply(this,arguments)}return a}(w["d"]);jt=Object(C["a"])([Object(w["a"])({components:{UsersLayout:kt}})],jt);var Ot=jt,xt=Ot,Dt=(a("871e"),Object(c["a"])(xt,at,st,!1,null,"feb03afc",null)),At=Dt.exports,Et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"verify"},[a("PassChangeForm")],1)},Pt=[],Nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"section--2 chpass__form p-4 m-6 animate__animated animate__fadeIn",on:{submit:e.chPassForm}},[e._m(0),a("div",{staticClass:"field"},[a("label",{staticClass:"label is-size-7 has-text-left\t"},[e._v("Ancien mot de passe")]),a("div",{staticClass:"control has-icons-left"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.formChPass.oldPassword.$model,expression:"$v.formChPass.oldPassword.$model"}],staticClass:"input",attrs:{id:"oldpassword",type:"password",required:""},domProps:{value:e.$v.formChPass.oldPassword.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.formChPass.oldPassword,"$model",t.target.value)}}})]),a("span",{staticClass:"icon is-small is-left"},[a("font-awesome-icon",{attrs:{icon:["fas","key"]}})],1)])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label is-size-7 has-text-left\t"},[e._v("Nouveau mot de passe")]),a("div",{staticClass:"control has-icons-left"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.formChPass.newPassword.$model,expression:"$v.formChPass.newPassword.$model"}],staticClass:"input",attrs:{id:"password",type:"password",required:""},domProps:{value:e.$v.formChPass.newPassword.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.formChPass.newPassword,"$model",t.target.value)}}})]),a("span",{staticClass:"icon is-small is-left"},[a("font-awesome-icon",{attrs:{icon:["fas","key"]}})],1)])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label is-size-7 has-text-left\t"},[e._v("Confirmer le mot de passe")]),a("div",{staticClass:"control has-icons-left"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.formChPass.confPassword.$model,expression:"$v.formChPass.confPassword.$model"}],staticClass:"input",attrs:{id:"confpassword",type:"password",required:""},domProps:{value:e.$v.formChPass.confPassword.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.formChPass.confPassword,"$model",t.target.value)}}})]),a("span",{staticClass:"icon is-small is-left"},[a("font-awesome-icon",{attrs:{icon:["fas","key"]}})],1)])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.backSuccess,expression:"backSuccess"}],staticClass:"message is-success"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Changement de mot de passe effectué, vous allez être redirigé vers la page d'authentification ")])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.failVerify||e.$v.formChPass.$invalid,expression:"failVerify || $v.formChPass.$invalid"}],staticClass:"message is-danger"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Les mots de passes ne correspondent pas, aussi l'utilisation de l'ancien mot de passe est interdite ")])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.wrongPasswordError,expression:"wrongPasswordError"}],staticClass:"message is-danger"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Votre ancien mot de passe est incorrect ")])]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.backError,expression:"backError"}],staticClass:"message is-danger"},[a("div",{staticClass:"message-body is-size-7"},[e._v(" Une erreur interne est survenue, veuillez réessayer dans quelques instants ")])]),a("div",{staticClass:"chpass__form__form--footer"},[a("button",{staticClass:"button is-success is-fullwidth is-size-6",attrs:{id:"login",disabled:e.backSuccess,type:"submit"}},[e._v("Changer le mot de passe")])])])},Mt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"field"},[a("h1",{staticClass:"label is-size-5 has-text-centered is-fullwidth\t"},[e._v("Changement de mot de passe")])])}],Ut=function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(b["a"])(this,a),e=t.apply(this,arguments),e.user=e.$store.state.auth.user,e.backSuccess=!1,e.backError=!1,e.wrongPasswordError=!1,e.formChPass={email:e.user.email,oldPassword:"",newPassword:"",confPassword:""},e}return Object(k["a"])(a,[{key:"mounted",value:function(){var e=document.getElementById("confpassword");e&&(e.onpaste=function(e){return e.preventDefault()}),!1===this.user.temporaryPassword&&this.$router.push("/")}},{key:"chPassForm",value:function(e){var t=this;this.backSuccess||(e.preventDefault(),this.$api.post("/auth/password/change",this.formChPass,{headers:te(this.user.token)}).then((function(){t.backSuccess=!0,t.backError=!1,t.wrongPasswordError=!1,setTimeout((function(){t.$router.push("/")}),1e3)})).catch((function(e){e.response&&"Invalid name or old password"===e.response.data.message?t.wrongPasswordError=!0:t.backError=!0})))}},{key:"failVerify",get:function(){return this.formChPass.newPassword!==this.formChPass.confPassword||this.formChPass.oldPassword===this.formChPass.newPassword}}]),a}(w["d"]);Ut=Object(C["a"])([Object(w["a"])({validations:{formChPass:{email:{required:ae["required"]},oldPassword:{required:ae["required"]},newPassword:{required:ae["required"]},confPassword:{required:ae["required"]}}}})],Ut);var qt=Ut,zt=qt,It=(a("4c43"),Object(c["a"])(zt,Nt,Mt,!1,null,"782181ef",null)),St=It.exports,Lt=function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(b["a"])(this,a),t.apply(this,arguments)}return a}(w["d"]);Lt=Object(C["a"])([Object(w["a"])({components:{PassChangeForm:St}})],Lt);var Tt=Lt,Ft=Tt,Rt=(a("61f6"),Object(c["a"])(Ft,Et,Pt,!1,null,"1d2945ec",null)),Bt=Rt.exports,Vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"error"},[a("figure",[a("div",{staticClass:"sad-mac"}),e._m(0),a("button",{staticClass:"button is-rounded is-info error__home",on:{click:e.goHome}},[e._v("Retourner à la page d'acceuil")])])])},Yt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("figcaption",[a("span",{staticClass:"sr-text"},[e._v("Error 404: Not Found")]),a("span",{staticClass:"e"}),a("span",{staticClass:"r"}),a("span",{staticClass:"r"}),a("span",{staticClass:"o"}),a("span",{staticClass:"r"}),a("span",{staticClass:"_4"}),a("span",{staticClass:"_0"}),a("span",{staticClass:"_4"}),a("span",{staticClass:"n"}),a("span",{staticClass:"o"}),a("span",{staticClass:"t"}),a("span",{staticClass:"f"}),a("span",{staticClass:"o"}),a("span",{staticClass:"u"}),a("span",{staticClass:"n"}),a("span",{staticClass:"d"})])}],Ht=function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(b["a"])(this,a),t.apply(this,arguments)}return Object(k["a"])(a,[{key:"goHome",value:function(){this.$router.push("/")}}]),a}(w["d"]);Ht=Object(C["a"])([w["a"]],Ht);var Jt=Ht,Gt=Jt,Kt=(a("9fe5"),Object(c["a"])(Gt,Vt,Yt,!1,null,"3e00cdd2",null)),Qt=Kt.exports;s["a"].use(p["a"]);var Wt=[{path:"/",name:"login",component:U},{path:"/mainpage",name:"mainpage",component:tt,children:[{path:"dashboard",component:Fe},{path:"users",component:At},{path:"verify",component:Bt}]},{path:"*",component:Qt}],Xt=new p["a"]({mode:"history",base:"/",routes:Wt}),Zt=Xt,ea=a("2f62"),ta={state:{user:{id:null,firstName:null,lastName:null,email:null,admin:!1,token:null,temporaryPassword:null,logged:!1}},mutations:{loginSuccess:function(e,t){e.user.id=t.id,e.user.firstName=t.firstName,e.user.lastName=t.lastName,e.user.email=t.email,e.user.admin=t.admin,e.user.token=t.token,e.user.temporaryPassword=t.temporaryPassword,e.user.logged=!0}},actions:{login:function(e,t){e.commit("loginSuccess",t)}}},aa=(a("a434"),{state:{items:[]},mutations:{addItem:function(e,t){t.identifier=e.items.length,e.items.push(t)},remItem:function(e,t){e.items.splice(t.identifier,1)},clearItems:function(e){e.items.length=0}},actions:{addToCart:function(e,t){e.commit("addItem",t)},remFromCart:function(e,t){e.commit("remItem",t)},clearCart:function(e){e.commit("clearItems")}}}),sa={state:{categories:[]},mutations:{initDevices:function(e,t){e.categories.length=0,t.map((function(t){e.categories.push(t)}))}},actions:{initDevices:function(e,t){e.commit("initDevices",t)}}},ia=a("0e44");s["a"].use(ea["a"]);var ra=new ea["a"].Store({state:{web:{filters:[{name:"nom",model:"searchByName",auto:!0},{name:"référence",model:"searchByRef",auto:!1},{name:"catégorie",model:"searchByCategory",auto:!1}]}},mutations:{clearStore:function(e){e.cart.items=[],e.auth.user.id=null,e.auth.user.firstName=null,e.auth.user.lastName=null,e.auth.user.email=null,e.auth.user.admin=!1,e.auth.user.token=null,e.auth.user.temporaryPassword=null,e.auth.user.logged=!1}},actions:{logout:function(e){e.commit("clearStore")}},modules:{auth:ta,cart:aa,devices:sa},plugins:[Object(ia["a"])({})]}),oa=a("ecee"),na=a("c074"),ca=a("ad3d");s["a"].use(r.a),s["a"].component("font-awesome-icon",ca["a"]),oa["c"].add(na["a"]),v.a.defaults.baseURL="http://localhost:3000/api",s["a"].prototype.$api=v.a,s["a"].config.productionTip=!1,new s["a"]({router:Zt,store:ra,render:function(e){return e(u)}}).$mount("#app")},d9c7:function(e,t,a){},ddf4:function(e,t,a){"use strict";a("98be")},e1b3:function(e,t,a){},e37c:function(e,t,a){},ede2:function(e,t,a){},f036:function(e,t,a){"use strict";a("e37c")},f118:function(e,t,a){"use strict";a("d9c7")},f82b:function(e,t,a){}});
//# sourceMappingURL=app.70be3018.js.map