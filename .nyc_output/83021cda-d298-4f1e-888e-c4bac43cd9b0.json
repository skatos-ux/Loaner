{"C:\\Users\\paull\\Documents\\TAF\\Projets Polytech\\Projet Qualité Logicielle\\Loaner\\src\\dao\\dao_category.ts":{"path":"C:\\Users\\paull\\Documents\\TAF\\Projets Polytech\\Projet Qualité Logicielle\\Loaner\\src\\dao\\dao_category.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":14},"end":{"line":6,"column":30}},"4":{"start":{"line":7,"column":19},"end":{"line":7,"column":64}},"5":{"start":{"line":10,"column":8},"end":{"line":10,"column":56}},"6":{"start":{"line":13,"column":8},"end":{"line":13,"column":90}},"7":{"start":{"line":16,"column":8},"end":{"line":16,"column":57}},"8":{"start":{"line":19,"column":8},"end":{"line":19,"column":78}},"9":{"start":{"line":22,"column":8},"end":{"line":22,"column":92}},"10":{"start":{"line":25,"column":8},"end":{"line":25,"column":81}},"11":{"start":{"line":28,"column":8},"end":{"line":28,"column":134}},"12":{"start":{"line":28,"column":89},"end":{"line":28,"column":130}},"13":{"start":{"line":31,"column":0},"end":{"line":31,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":20},"end":{"line":11,"column":5}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":38},"end":{"line":14,"column":5}},"line":12},"3":{"name":"(anonymous_3)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":13},"end":{"line":17,"column":5}},"line":15},"4":{"name":"(anonymous_4)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":31},"end":{"line":20,"column":5}},"line":18},"5":{"name":"(anonymous_5)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":37},"end":{"line":23,"column":5}},"line":21},"6":{"name":"(anonymous_6)","decl":{"start":{"line":24,"column":4},"end":{"line":24,"column":5}},"loc":{"start":{"line":24,"column":16},"end":{"line":26,"column":5}},"line":24},"7":{"name":"(anonymous_7)","decl":{"start":{"line":27,"column":4},"end":{"line":27,"column":5}},"loc":{"start":{"line":27,"column":20},"end":{"line":29,"column":5}},"line":27},"8":{"name":"(anonymous_8)","decl":{"start":{"line":28,"column":81},"end":{"line":28,"column":82}},"loc":{"start":{"line":28,"column":87},"end":{"line":28,"column":132}},"line":28}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":9,"6":2,"7":1,"8":2,"9":0,"10":2,"11":5,"12":0,"13":1},"f":{"0":1,"1":9,"2":2,"3":1,"4":2,"5":0,"6":2,"7":5,"8":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/paull/Documents/TAF/Projets Polytech/Projet Qualité Logicielle/Loaner/src/dao/dao_category.ts","sources":["C:/Users/paull/Documents/TAF/Projets Polytech/Projet Qualité Logicielle/Loaner/src/dao/dao_category.ts"],"names":[],"mappings":";;;;;AAAA,+BAA4B;AAC5B,iEAAyC;AAEzC,MAAqB,WAAY,SAAQ,SAAa;IAE3C,UAAU,CAAC,GAAQ;QACtB,OAAO,IAAI,kBAAQ,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;IAC1C,CAAC;IAEM,WAAW,CAAC,YAAqB,EAAE,MAAe;QACrD,OAAO,IAAI,CAAC,QAAQ,CAAC,mCAAmC,EAAE,CAAC,MAAM,EAAE,YAAY,CAAC,CAAC,CAAC;IACtF,CAAC;IAGM,MAAM;QACT,OAAO,IAAI,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;IACrD,CAAC;IAEM,cAAc,CAAC,UAAmB;QACrC,OAAO,IAAI,CAAC,QAAQ,CAAC,iCAAiC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC;IAC1E,CAAC;IAEM,cAAc,CAAC,OAAgB,EAAE,OAAgB;QACpD,OAAO,IAAI,CAAC,QAAQ,CAAC,yCAAyC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC;IACxF,CAAC;IAEM,SAAS;QACZ,OAAO,IAAI,CAAC,SAAS,CAAC,iDAAiD,CAAC,CAAC;IAC7E,CAAC;IAEM,SAAS,CAAC,IAAY;QACzB,OAAO,IAAI,CAAC,SAAS,CAAC,qCAAqC,EAAE,IAAI,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,MAAM,IAAI,KAAK,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClI,CAAC;CACJ;AA9BD,8BA8BC","sourcesContent":["import { DAO } from './dao';\r\nimport Category from '../model/category';\r\n\r\nexport default class DAOCategory extends DAO<Category> {\r\n\r\n    public rowToModel(row: any): Category {\r\n        return new Category(row.id, row.name);\r\n    }\r\n\r\n    public addCategory(nameCategory : string, lastId : number) : Promise<void> {\r\n        return this.runQuery(\"insert into category values(?, ?)\", [lastId, nameCategory]);\r\n    }\r\n\r\n    // Non utilisé\r\n    public getAll() : Promise<Category[]> {\r\n        return this.getAllRows(\"SELECT * FROM category\");\r\n    }\r\n\r\n    public deleteCategory(idCategory : string) : Promise<void>{\r\n        return this.runQuery(\"delete from category where id=?\", [idCategory]);\r\n    }\r\n\r\n    public modifyCategory(oldName : string, newName : string) : Promise<void>{\r\n        return this.runQuery('update category set name=? where name=?', [newName, oldName]);\r\n    }\r\n\r\n    public getLastId() : Promise<Category>{\r\n        return this.getOneRow('select * from category order by id DESC LIMIT 1');\r\n    }\r\n\r\n    public getByName(name: string) : Promise<Category> {\r\n        return this.getOneRow(\"SELECT * FROM category WHERE name=?\", name).catch(() => { throw new Error(\"Invalid category name\"); });\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b554529fa82f0f92530cb09abf6c9ba119661aba"},"C:\\Users\\paull\\Documents\\TAF\\Projets Polytech\\Projet Qualité Logicielle\\Loaner\\src\\dao\\dao.ts":{"path":"C:\\Users\\paull\\Documents\\TAF\\Projets Polytech\\Projet Qualité Logicielle\\Loaner\\src\\dao\\dao.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":0},"end":{"line":21,"column":62}},"22":{"start":{"line":22,"column":0},"end":{"line":22,"column":34}},"23":{"start":{"line":23,"column":18},"end":{"line":23,"column":36}},"24":{"start":{"line":24,"column":15},"end":{"line":24,"column":57}},"25":{"start":{"line":25,"column":15},"end":{"line":25,"column":34}},"26":{"start":{"line":26,"column":11},"end":{"line":26,"column":45}},"27":{"start":{"line":27,"column":0},"end":{"line":27,"column":16}},"28":{"start":{"line":30,"column":8},"end":{"line":30,"column":102}},"29":{"start":{"line":30,"column":70},"end":{"line":30,"column":98}},"30":{"start":{"line":33,"column":8},"end":{"line":45,"column":11}},"31":{"start":{"line":34,"column":12},"end":{"line":44,"column":15}},"32":{"start":{"line":35,"column":16},"end":{"line":43,"column":17}},"33":{"start":{"line":36,"column":20},"end":{"line":36,"column":32}},"34":{"start":{"line":38,"column":21},"end":{"line":43,"column":17}},"35":{"start":{"line":39,"column":20},"end":{"line":39,"column":61}},"36":{"start":{"line":42,"column":20},"end":{"line":42,"column":33}},"37":{"start":{"line":48,"column":8},"end":{"line":57,"column":11}},"38":{"start":{"line":49,"column":12},"end":{"line":56,"column":15}},"39":{"start":{"line":50,"column":16},"end":{"line":55,"column":17}},"40":{"start":{"line":51,"column":20},"end":{"line":51,"column":32}},"41":{"start":{"line":54,"column":20},"end":{"line":54,"column":55}},"42":{"start":{"line":60,"column":8},"end":{"line":69,"column":11}},"43":{"start":{"line":61,"column":12},"end":{"line":68,"column":15}},"44":{"start":{"line":62,"column":16},"end":{"line":67,"column":17}},"45":{"start":{"line":63,"column":20},"end":{"line":63,"column":32}},"46":{"start":{"line":66,"column":20},"end":{"line":66,"column":30}},"47":{"start":{"line":72,"column":0},"end":{"line":72,"column":18}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":29,"column":4},"end":{"line":29,"column":5}},"loc":{"start":{"line":29,"column":37},"end":{"line":31,"column":5}},"line":29},"7":{"name":"(anonymous_7)","decl":{"start":{"line":30,"column":59},"end":{"line":30,"column":60}},"loc":{"start":{"line":30,"column":68},"end":{"line":30,"column":100}},"line":30},"8":{"name":"(anonymous_8)","decl":{"start":{"line":32,"column":4},"end":{"line":32,"column":5}},"loc":{"start":{"line":32,"column":43},"end":{"line":46,"column":5}},"line":32},"9":{"name":"(anonymous_9)","decl":{"start":{"line":33,"column":27},"end":{"line":33,"column":28}},"loc":{"start":{"line":33,"column":48},"end":{"line":45,"column":9}},"line":33},"10":{"name":"(anonymous_10)","decl":{"start":{"line":34,"column":37},"end":{"line":34,"column":38}},"loc":{"start":{"line":34,"column":51},"end":{"line":44,"column":13}},"line":34},"11":{"name":"(anonymous_11)","decl":{"start":{"line":47,"column":4},"end":{"line":47,"column":5}},"loc":{"start":{"line":47,"column":38},"end":{"line":58,"column":5}},"line":47},"12":{"name":"(anonymous_12)","decl":{"start":{"line":48,"column":27},"end":{"line":48,"column":28}},"loc":{"start":{"line":48,"column":48},"end":{"line":57,"column":9}},"line":48},"13":{"name":"(anonymous_13)","decl":{"start":{"line":49,"column":37},"end":{"line":49,"column":38}},"loc":{"start":{"line":49,"column":52},"end":{"line":56,"column":13}},"line":49},"14":{"name":"(anonymous_14)","decl":{"start":{"line":59,"column":4},"end":{"line":59,"column":5}},"loc":{"start":{"line":59,"column":31},"end":{"line":70,"column":5}},"line":59},"15":{"name":"(anonymous_15)","decl":{"start":{"line":60,"column":27},"end":{"line":60,"column":28}},"loc":{"start":{"line":60,"column":48},"end":{"line":69,"column":9}},"line":60},"16":{"name":"(anonymous_16)","decl":{"start":{"line":61,"column":37},"end":{"line":61,"column":38}},"loc":{"start":{"line":61,"column":44},"end":{"line":68,"column":13}},"line":61}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17},"12":{"loc":{"start":{"line":29,"column":24},"end":{"line":29,"column":35}},"type":"default-arg","locations":[{"start":{"line":29,"column":33},"end":{"line":29,"column":35}}],"line":29},"13":{"loc":{"start":{"line":32,"column":30},"end":{"line":32,"column":41}},"type":"default-arg","locations":[{"start":{"line":32,"column":39},"end":{"line":32,"column":41}}],"line":32},"14":{"loc":{"start":{"line":35,"column":16},"end":{"line":43,"column":17}},"type":"if","locations":[{"start":{"line":35,"column":16},"end":{"line":43,"column":17}},{"start":{"line":35,"column":16},"end":{"line":43,"column":17}}],"line":35},"15":{"loc":{"start":{"line":38,"column":21},"end":{"line":43,"column":17}},"type":"if","locations":[{"start":{"line":38,"column":21},"end":{"line":43,"column":17}},{"start":{"line":38,"column":21},"end":{"line":43,"column":17}}],"line":38},"16":{"loc":{"start":{"line":47,"column":25},"end":{"line":47,"column":36}},"type":"default-arg","locations":[{"start":{"line":47,"column":34},"end":{"line":47,"column":36}}],"line":47},"17":{"loc":{"start":{"line":50,"column":16},"end":{"line":55,"column":17}},"type":"if","locations":[{"start":{"line":50,"column":16},"end":{"line":55,"column":17}},{"start":{"line":50,"column":16},"end":{"line":55,"column":17}}],"line":50},"18":{"loc":{"start":{"line":62,"column":16},"end":{"line":67,"column":17}},"type":"if","locations":[{"start":{"line":62,"column":16},"end":{"line":67,"column":17}},{"start":{"line":62,"column":16},"end":{"line":67,"column":17}}],"line":62}},"s":{"0":1,"1":5,"2":5,"3":5,"4":1,"5":0,"6":0,"7":0,"8":1,"9":1,"10":0,"11":1,"12":1,"13":0,"14":1,"15":1,"16":1,"17":5,"18":5,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":13,"29":8,"30":13,"31":13,"32":13,"33":0,"34":13,"35":5,"36":8,"37":17,"38":17,"39":17,"40":1,"41":16,"42":8,"43":8,"44":8,"45":2,"46":6,"47":1},"f":{"0":5,"1":1,"2":0,"3":1,"4":0,"5":1,"6":13,"7":8,"8":13,"9":13,"10":13,"11":17,"12":17,"13":17,"14":8,"15":8,"16":8},"b":{"0":[1,1,1],"1":[1,0],"2":[5,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[0,1],"8":[1,1],"9":[1,0],"10":[5,0],"11":[5,5],"12":[6],"13":[0],"14":[0,13],"15":[5,8],"16":[11],"17":[1,16],"18":[2,6]},"inputSourceMap":{"version":3,"file":"C:/Users/paull/Documents/TAF/Projets Polytech/Projet Qualité Logicielle/Loaner/src/dao/dao.ts","sources":["C:/Users/paull/Documents/TAF/Projets Polytech/Projet Qualité Logicielle/Loaner/src/dao/dao.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,qCAAkC;AAClC,0DAA4C;AAE5C,MAAM,MAAM,GAAG,iBAAO,EAAE,CAAC;AACzB,MAAM,EAAE,GAAG,IAAI,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;AAgE1C,gBAAE;AA9DN,MAAe,GAAG;IASJ,SAAS,CAAC,QAAiB,EAAE,SAAe,EAAE;QACpD,OAAO,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE,GAAG,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClG,CAAC;IAKS,eAAe,CAAC,QAAiB,EAAE,SAAe,EAAE;QAC1D,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YACnC,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;gBAClC,IAAI,GAAG,EAAE;oBACL,MAAM,CAAC,GAAG,CAAC,CAAC;iBACf;qBAAM,IAAG,GAAG,IAAI,IAAI,EAAE;oBACnB,MAAM,CAAC,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC,CAAC;iBAC5C;qBAAM;oBACH,OAAO,CAAC,GAAG,CAAC,CAAC;iBAChB;YACL,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAKS,UAAU,CAAC,QAAiB,EAAE,SAAe,EAAE;QACrD,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YACnC,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,EAAE,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE;gBACnC,IAAI,GAAG,EAAE;oBACL,MAAM,CAAC,GAAG,CAAC,CAAC;iBACf;qBAAM;oBACH,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;iBACtC;YACL,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAKS,QAAQ,CAAC,QAAiB,EAAE,MAAY;QAC9C,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YACnC,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,EAAE,GAAG,CAAC,EAAE;gBAC3B,IAAI,GAAG,EAAE;oBACL,MAAM,CAAC,GAAG,CAAC,CAAC;iBACf;qBAAM;oBACH,OAAO,EAAE,CAAC;iBACb;YACL,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;CACJ;AAIG,kBAAG","sourcesContent":["import { verbose } from 'sqlite3';\r\nimport * as config from '../../config.json';\r\n\r\nconst sqlite = verbose();\r\nconst db = new sqlite.Database(config.dbFile);\r\n\r\nabstract class DAO<T> {\r\n\r\n    /*  A faire implémenter par la classe fille\r\n        Permet de transformer une ligne de la base de donnée en objet du modèle */\r\n    public abstract rowToModel(row: any) : T;\r\n\r\n    /*  Pour obtenir une seule ligne\r\n        sqlQuery : Requête SQL\r\n        params : Paramètre de la requête préparée, peut être ignoré */\r\n    protected getOneRow(sqlQuery : string, params : any = []) : Promise<T> {\r\n        return this.getOneRowNoCast(sqlQuery, params).then((row) => { return this.rowToModel(row); });\r\n    }\r\n\r\n    /*  Pour obtenir une seule ligne mais sans conversion vers un objet du modèle\r\n        sqlQuery : Requête SQL\r\n        params : Paramètre de la requête préparée, peut être ignoré */\r\n    protected getOneRowNoCast(sqlQuery : string, params : any = []) : Promise<any> {\r\n        return new Promise((resolve, reject) => {\r\n            db.get(sqlQuery, params, (err, row) => {\r\n                if (err) {\r\n                    reject(err);\r\n                } else if(row == null) {\r\n                    reject(new Error(\"Cannot find results\"));\r\n                } else {\r\n                    resolve(row);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /*  Pour obtenir toutes les lignes\r\n        sqlQuery : Requête SQL\r\n        params : Paramètre de la requête préparée, peut être ignoré */\r\n    protected getAllRows(sqlQuery : string, params : any = []) : Promise<T[]> {\r\n        return new Promise((resolve, reject) => {\r\n            db.all(sqlQuery, params, (err, rows) => {\r\n                if (err) {\r\n                    reject(err);\r\n                } else {\r\n                    resolve(rows.map(this.rowToModel));\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /*  Pour simplement exécuter une requête\r\n        sqlQuery : Requête SQL\r\n        params : Paramètre de la requête préparée, peut être ignoré */\r\n    protected runQuery(sqlQuery : string, params : any) : Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            db.run(sqlQuery, params, err => {\r\n                if (err) {\r\n                    reject(err);\r\n                } else {\r\n                    resolve();\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nexport {\r\n    db,\r\n    DAO\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"90c61dabcf1297667f93e57aad32035016d76149"},"C:\\Users\\paull\\Documents\\TAF\\Projets Polytech\\Projet Qualité Logicielle\\Loaner\\src\\model\\category.ts":{"path":"C:\\Users\\paull\\Documents\\TAF\\Projets Polytech\\Projet Qualité Logicielle\\Loaner\\src\\model\\category.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":21}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":25}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":26}},"4":{"start":{"line":10,"column":8},"end":{"line":10,"column":23}},"5":{"start":{"line":13,"column":8},"end":{"line":13,"column":25}},"6":{"start":{"line":16,"column":8},"end":{"line":16,"column":28}},"7":{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},"8":{"start":{"line":20,"column":12},"end":{"line":20,"column":42}},"9":{"start":{"line":22,"column":8},"end":{"line":22,"column":21}},"10":{"start":{"line":25,"column":8},"end":{"line":27,"column":9}},"11":{"start":{"line":26,"column":12},"end":{"line":26,"column":44}},"12":{"start":{"line":28,"column":8},"end":{"line":28,"column":25}},"13":{"start":{"line":31,"column":8},"end":{"line":31,"column":34}},"14":{"start":{"line":34,"column":0},"end":{"line":34,"column":27}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":26},"end":{"line":8,"column":5}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":12},"end":{"line":11,"column":5}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":14},"end":{"line":14,"column":5}},"line":12},"3":{"name":"(anonymous_3)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":17},"end":{"line":17,"column":5}},"line":15},"4":{"name":"(anonymous_4)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":14},"end":{"line":23,"column":5}},"line":18},"5":{"name":"(anonymous_5)","decl":{"start":{"line":24,"column":4},"end":{"line":24,"column":5}},"loc":{"start":{"line":24,"column":18},"end":{"line":29,"column":5}},"line":24},"6":{"name":"(anonymous_6)","decl":{"start":{"line":30,"column":4},"end":{"line":30,"column":5}},"loc":{"start":{"line":30,"column":22},"end":{"line":32,"column":5}},"line":30}},"branchMap":{"0":{"loc":{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},"type":"if","locations":[{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},{"start":{"line":19,"column":8},"end":{"line":21,"column":9}}],"line":19},"1":{"loc":{"start":{"line":25,"column":8},"end":{"line":27,"column":9}},"type":"if","locations":[{"start":{"line":25,"column":8},"end":{"line":27,"column":9}},{"start":{"line":25,"column":8},"end":{"line":27,"column":9}}],"line":25},"2":{"loc":{"start":{"line":25,"column":12},"end":{"line":25,"column":58}},"type":"binary-expr","locations":[{"start":{"line":25,"column":12},"end":{"line":25,"column":17}},{"start":{"line":25,"column":21},"end":{"line":25,"column":37}},{"start":{"line":25,"column":41},"end":{"line":25,"column":58}}],"line":25}},"s":{"0":1,"1":10,"2":10,"3":10,"4":8,"5":5,"6":0,"7":1,"8":0,"9":1,"10":3,"11":2,"12":1,"13":0,"14":1},"f":{"0":10,"1":8,"2":5,"3":0,"4":1,"5":3,"6":0},"b":{"0":[0,1],"1":[2,1],"2":[3,2,2]},"inputSourceMap":{"version":3,"file":"C:/Users/paull/Documents/TAF/Projets Polytech/Projet Qualité Logicielle/Loaner/src/model/category.ts","sources":["C:/Users/paull/Documents/TAF/Projets Polytech/Projet Qualité Logicielle/Loaner/src/model/category.ts"],"names":[],"mappings":";;AAEA,MAAqB,QAAQ;IAKzB,YAAY,EAAW,EAAE,IAAa;QAClC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;IACtB,CAAC;IAEM,KAAK;QACR,OAAO,IAAI,CAAC,EAAE,CAAC;IACnB,CAAC;IAEM,OAAO;QACV,OAAO,IAAI,CAAC,IAAI,CAAC;IACrB,CAAC;IAEM,UAAU;QACb,OAAO,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;IAEM,KAAK,CAAC,EAAW;QAEpB,IAAG,EAAE,GAAG,CAAC,EAAE;YACP,MAAM,IAAI,KAAK,CAAC,YAAY,CAAC,CAAC;SACjC;QAED,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;IACjB,CAAC;IAEM,OAAO,CAAC,IAAa;QAExB,IAAG,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,GAAG,GAAG,EAAE;YAC/C,MAAM,IAAI,KAAK,CAAC,cAAc,CAAC,CAAC;SACnC;QAED,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACrB,CAAC;IAEM,SAAS,CAAC,MAAe;QAC5B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC9B,CAAC;CACJ;AA5CD,2BA4CC","sourcesContent":["import Device from \"./device\";\r\n\r\nexport default class Category {\r\n    private ID!: number;\r\n    private name!: string;\r\n    private devices!: Device[];\r\n\r\n    constructor(ID : number, name : string) {\r\n        this.ID = ID;\r\n        this.name = name;\r\n        this.devices = [];\r\n    }\r\n\r\n    public getID() : number {\r\n        return this.ID;\r\n    }\r\n\r\n    public getName() : string {\r\n        return this.name;\r\n    }\r\n\r\n    public getDevices() : Device[] {\r\n        return this.devices;\r\n    }\r\n\r\n    public setID(ID : number) : void {\r\n\r\n        if(ID < 0) {\r\n            throw new Error(\"Invalid ID\");\r\n        }\r\n\r\n        this.ID = ID;\r\n    }\r\n\r\n    public setName(name : string) : void {\r\n\r\n        if(!name || name.length == 0 || name.length > 255) {\r\n            throw new Error(\"Invalid name\");\r\n        }\r\n\r\n        this.name = name;\r\n    }\r\n\r\n    public addDevice(device : Device) : void {\r\n        this.devices.push(device);\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"535c8e3f148580b28ee5bc1e30b9e58ff037d783"},"C:\\Users\\paull\\Documents\\TAF\\Projets Polytech\\Projet Qualité Logicielle\\Loaner\\src\\dao\\dao_device.ts":{"path":"C:\\Users\\paull\\Documents\\TAF\\Projets Polytech\\Projet Qualité Logicielle\\Loaner\\src\\dao\\dao_device.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":14},"end":{"line":6,"column":30}},"4":{"start":{"line":7,"column":17},"end":{"line":7,"column":60}},"5":{"start":{"line":10,"column":8},"end":{"line":10,"column":124}},"6":{"start":{"line":13,"column":8},"end":{"line":15,"column":41}},"7":{"start":{"line":18,"column":8},"end":{"line":20,"column":64}},"8":{"start":{"line":23,"column":22},"end":{"line":23,"column":32}},"9":{"start":{"line":24,"column":19},"end":{"line":24,"column":34}},"10":{"start":{"line":25,"column":19},"end":{"line":25,"column":39}},"11":{"start":{"line":26,"column":21},"end":{"line":26,"column":52}},"12":{"start":{"line":27,"column":18},"end":{"line":27,"column":32}},"13":{"start":{"line":28,"column":20},"end":{"line":28,"column":34}},"14":{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},"15":{"start":{"line":30,"column":12},"end":{"line":30,"column":44}},"16":{"start":{"line":32,"column":8},"end":{"line":34,"column":9}},"17":{"start":{"line":33,"column":12},"end":{"line":33,"column":46}},"18":{"start":{"line":35,"column":21},"end":{"line":35,"column":51}},"19":{"start":{"line":36,"column":8},"end":{"line":36,"column":122}},"20":{"start":{"line":39,"column":8},"end":{"line":39,"column":191}},"21":{"start":{"line":42,"column":8},"end":{"line":42,"column":76}},"22":{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},"23":{"start":{"line":46,"column":12},"end":{"line":46,"column":74}},"24":{"start":{"line":48,"column":25},"end":{"line":48,"column":27}},"25":{"start":{"line":49,"column":23},"end":{"line":49,"column":25}},"26":{"start":{"line":50,"column":8},"end":{"line":53,"column":9}},"27":{"start":{"line":51,"column":12},"end":{"line":51,"column":40}},"28":{"start":{"line":52,"column":12},"end":{"line":52,"column":30}},"29":{"start":{"line":54,"column":8},"end":{"line":57,"column":9}},"30":{"start":{"line":55,"column":12},"end":{"line":55,"column":39}},"31":{"start":{"line":56,"column":12},"end":{"line":56,"column":29}},"32":{"start":{"line":58,"column":8},"end":{"line":61,"column":9}},"33":{"start":{"line":59,"column":12},"end":{"line":59,"column":46}},"34":{"start":{"line":60,"column":12},"end":{"line":60,"column":36}},"35":{"start":{"line":62,"column":8},"end":{"line":64,"column":79}},"36":{"start":{"line":67,"column":0},"end":{"line":67,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":20},"end":{"line":11,"column":5}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":13},"end":{"line":16,"column":5}},"line":12},"3":{"name":"(anonymous_3)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":19},"end":{"line":21,"column":5}},"line":17},"4":{"name":"(anonymous_4)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":43},"end":{"line":37,"column":5}},"line":22},"5":{"name":"(anonymous_5)","decl":{"start":{"line":38,"column":4},"end":{"line":38,"column":5}},"loc":{"start":{"line":38,"column":22},"end":{"line":40,"column":5}},"line":38},"6":{"name":"(anonymous_6)","decl":{"start":{"line":41,"column":4},"end":{"line":41,"column":5}},"loc":{"start":{"line":41,"column":28},"end":{"line":43,"column":5}},"line":41},"7":{"name":"(anonymous_7)","decl":{"start":{"line":44,"column":4},"end":{"line":44,"column":5}},"loc":{"start":{"line":44,"column":57},"end":{"line":65,"column":5}},"line":44}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},{"start":{"line":29,"column":8},"end":{"line":31,"column":9}}],"line":29},"4":{"loc":{"start":{"line":32,"column":8},"end":{"line":34,"column":9}},"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":34,"column":9}},{"start":{"line":32,"column":8},"end":{"line":34,"column":9}}],"line":32},"5":{"loc":{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},{"start":{"line":45,"column":8},"end":{"line":47,"column":9}}],"line":45},"6":{"loc":{"start":{"line":45,"column":12},"end":{"line":45,"column":74}},"type":"binary-expr","locations":[{"start":{"line":45,"column":12},"end":{"line":45,"column":22}},{"start":{"line":45,"column":26},"end":{"line":45,"column":35}},{"start":{"line":45,"column":39},"end":{"line":45,"column":54}},{"start":{"line":45,"column":58},"end":{"line":45,"column":74}}],"line":45},"7":{"loc":{"start":{"line":50,"column":8},"end":{"line":53,"column":9}},"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":53,"column":9}},{"start":{"line":50,"column":8},"end":{"line":53,"column":9}}],"line":50},"8":{"loc":{"start":{"line":54,"column":8},"end":{"line":57,"column":9}},"type":"if","locations":[{"start":{"line":54,"column":8},"end":{"line":57,"column":9}},{"start":{"line":54,"column":8},"end":{"line":57,"column":9}}],"line":54},"9":{"loc":{"start":{"line":58,"column":8},"end":{"line":61,"column":9}},"type":"if","locations":[{"start":{"line":58,"column":8},"end":{"line":61,"column":9}},{"start":{"line":58,"column":8},"end":{"line":61,"column":9}}],"line":58}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":19,"6":9,"7":2,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":2,"21":2,"22":4,"23":1,"24":3,"25":3,"26":3,"27":1,"28":1,"29":3,"30":1,"31":1,"32":3,"33":0,"34":0,"35":3,"36":1},"f":{"0":1,"1":19,"2":9,"3":2,"4":0,"5":2,"6":2,"7":4},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[0,0],"4":[0,0],"5":[1,3],"6":[4,3,2,1],"7":[1,2],"8":[1,2],"9":[0,3]},"inputSourceMap":{"version":3,"file":"C:/Users/paull/Documents/TAF/Projets Polytech/Projet Qualité Logicielle/Loaner/src/dao/dao_device.ts","sources":["C:/Users/paull/Documents/TAF/Projets Polytech/Projet Qualité Logicielle/Loaner/src/dao/dao_device.ts"],"names":[],"mappings":"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","sourcesContent":["import { DAO } from './dao';\r\nimport Device from '../model/device';\r\n\r\nexport default class DAODevice extends DAO<Device> {\r\n\r\n    // TODO : Gerer les lockDays \"reservation\"\r\n    // Besoin de laisser le champ available si on gère les réservations ?\r\n    public rowToModel(row: any): Device {\r\n        return new Device(row.ref, row.categoryID, row.categoryName, row.name, row.version, row.photo, row.phone);\r\n    }\r\n\r\n    public getAll() : Promise<Device[]> {\r\n        return this.getAllRows(\"SELECT ref, d.name as name, version, photo, phone, c.id as categoryID, c.name as categoryName \" +\r\n            \"FROM device d, category c \" +\r\n            \"WHERE d.idCategory = c.id\");\r\n    }\r\n\r\n    public get(refDevice : string) : Promise<Device> {\r\n        return this.getOneRow(\"SELECT ref, d.name as name, version, photo, phone, c.id as categoryID, c.name as category \" +\r\n            \"FROM device d, category c \" +\r\n            \"WHERE d.idCategory = c.id AND d.ref=?\", refDevice);\r\n    }\r\n\r\n    public borrowDevice(idDevice : string, idUser : string, lastId : number) : Promise<void> {\r\n        // Pour améliorer ca avec SQLite : https://sqlite.org/lang_datefunc.html\r\n        const today = new Date();\r\n        const dd = today.getDate();\r\n        const mm = today.getMonth()+1; \r\n        const yyyy = new String(today.getFullYear());\r\n        let day = new String(dd);\r\n        let month = new String(mm);\r\n        if(dd<10) \r\n        {\r\n            day = '0'.concat(dd.toString());\r\n        }\r\n        if(mm<10) \r\n        {\r\n            month = '0'.concat(mm.toString());\r\n        }\r\n        const date = day+'/'+month+'/'+yyyy;\r\n        return this.runQuery('insert into reservation values(?,?,?,?,?,?)',[lastId,idDevice,idUser,date,null,null]);\r\n    }\r\n\r\n    public addDevice(device : Device) : Promise<void> {\r\n        // Il faut mettre l'ID de la categorie et non pas le nom (device.getCategory() = nom)\r\n        return this.runQuery('insert into device values(?,?,?,?,?,?)',[device.getRef(), device.getCategoryID(), device.getName(), device.getVersion(), device.getPhoto(), device.getPhone()]);\r\n    }\r\n\r\n    public deleteDevice(refDevice : string) : Promise<void> {\r\n        return this.runQuery('delete from device where ref=?', [refDevice]);\r\n    }\r\n\r\n    public getDevicesByFilter(name: string, ref: string, available: number, categoryID: number) : Promise<Device[]> {\r\n\r\n        if(name == \"\" && ref == \"\" && available == -1 && categoryID == -1) {\r\n            return Promise.reject(new Error(\"All fields can't be empty\"));\r\n        }\r\n\r\n        const sqlWhens = [];\r\n        const params = [];\r\n\r\n        if(name != \"\") {\r\n            sqlWhens.push(\"d.name = ?\");\r\n            params.push(name);\r\n        }\r\n\r\n        if(ref != \"\") {\r\n            sqlWhens.push(\"d.ref = ?\");\r\n            params.push(ref);\r\n        }\r\n\r\n        // TODO : available\r\n\r\n        if(categoryID != -1) {\r\n            sqlWhens.push(\"d.idCategory = ?\");\r\n            params.push(categoryID);\r\n        }\r\n\r\n\r\n        return this.getAllRows(\"SELECT ref, d.name as name, version, photo, phone, c.name as category \" +\r\n            \"FROM device d, category c \" +\r\n            \"WHERE d.idCategory = c.id AND \" + sqlWhens.join(\" AND \")\r\n            , params);\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"776c6cc65e9f40ca2b1b3d086df18e3916adc942"},"C:\\Users\\paull\\Documents\\TAF\\Projets Polytech\\Projet Qualité Logicielle\\Loaner\\src\\model\\device.ts":{"path":"C:\\Users\\paull\\Documents\\TAF\\Projets Polytech\\Projet Qualité Logicielle\\Loaner\\src\\model\\device.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":25}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":37}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":41}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":27}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":33}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":29}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":29}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":29}},"9":{"start":{"line":15,"column":8},"end":{"line":15,"column":24}},"10":{"start":{"line":18,"column":8},"end":{"line":18,"column":31}},"11":{"start":{"line":21,"column":8},"end":{"line":21,"column":33}},"12":{"start":{"line":24,"column":8},"end":{"line":24,"column":25}},"13":{"start":{"line":27,"column":8},"end":{"line":27,"column":28}},"14":{"start":{"line":30,"column":8},"end":{"line":30,"column":26}},"15":{"start":{"line":33,"column":8},"end":{"line":33,"column":26}},"16":{"start":{"line":36,"column":8},"end":{"line":36,"column":29}},"17":{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},"18":{"start":{"line":40,"column":12},"end":{"line":40,"column":49}},"19":{"start":{"line":42,"column":8},"end":{"line":42,"column":23}},"20":{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},"21":{"start":{"line":46,"column":12},"end":{"line":46,"column":44}},"22":{"start":{"line":48,"column":8},"end":{"line":48,"column":25}},"23":{"start":{"line":51,"column":8},"end":{"line":53,"column":9}},"24":{"start":{"line":52,"column":12},"end":{"line":52,"column":47}},"25":{"start":{"line":54,"column":8},"end":{"line":54,"column":31}},"26":{"start":{"line":57,"column":8},"end":{"line":57,"column":27}},"27":{"start":{"line":60,"column":8},"end":{"line":62,"column":9}},"28":{"start":{"line":61,"column":12},"end":{"line":61,"column":52}},"29":{"start":{"line":63,"column":8},"end":{"line":63,"column":27}},"30":{"start":{"line":66,"column":8},"end":{"line":66,"column":33}},"31":{"start":{"line":69,"column":0},"end":{"line":69,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":76},"end":{"line":13,"column":5}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":13},"end":{"line":16,"column":5}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":20},"end":{"line":19,"column":5}},"line":17},"3":{"name":"(anonymous_3)","decl":{"start":{"line":20,"column":4},"end":{"line":20,"column":5}},"loc":{"start":{"line":20,"column":22},"end":{"line":22,"column":5}},"line":20},"4":{"name":"(anonymous_4)","decl":{"start":{"line":23,"column":4},"end":{"line":23,"column":5}},"loc":{"start":{"line":23,"column":14},"end":{"line":25,"column":5}},"line":23},"5":{"name":"(anonymous_5)","decl":{"start":{"line":26,"column":4},"end":{"line":26,"column":5}},"loc":{"start":{"line":26,"column":17},"end":{"line":28,"column":5}},"line":26},"6":{"name":"(anonymous_6)","decl":{"start":{"line":29,"column":4},"end":{"line":29,"column":5}},"loc":{"start":{"line":29,"column":15},"end":{"line":31,"column":5}},"line":29},"7":{"name":"(anonymous_7)","decl":{"start":{"line":32,"column":4},"end":{"line":32,"column":5}},"loc":{"start":{"line":32,"column":15},"end":{"line":34,"column":5}},"line":32},"8":{"name":"(anonymous_8)","decl":{"start":{"line":35,"column":4},"end":{"line":35,"column":5}},"loc":{"start":{"line":35,"column":18},"end":{"line":37,"column":5}},"line":35},"9":{"name":"(anonymous_9)","decl":{"start":{"line":38,"column":4},"end":{"line":38,"column":5}},"loc":{"start":{"line":38,"column":16},"end":{"line":43,"column":5}},"line":38},"10":{"name":"(anonymous_10)","decl":{"start":{"line":44,"column":4},"end":{"line":44,"column":5}},"loc":{"start":{"line":44,"column":18},"end":{"line":49,"column":5}},"line":44},"11":{"name":"(anonymous_11)","decl":{"start":{"line":50,"column":4},"end":{"line":50,"column":5}},"loc":{"start":{"line":50,"column":24},"end":{"line":55,"column":5}},"line":50},"12":{"name":"(anonymous_12)","decl":{"start":{"line":56,"column":4},"end":{"line":56,"column":5}},"loc":{"start":{"line":56,"column":20},"end":{"line":58,"column":5}},"line":56},"13":{"name":"(anonymous_13)","decl":{"start":{"line":59,"column":4},"end":{"line":59,"column":5}},"loc":{"start":{"line":59,"column":20},"end":{"line":64,"column":5}},"line":59},"14":{"name":"(anonymous_14)","decl":{"start":{"line":65,"column":4},"end":{"line":65,"column":5}},"loc":{"start":{"line":65,"column":26},"end":{"line":67,"column":5}},"line":65}},"branchMap":{"0":{"loc":{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},"type":"if","locations":[{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},{"start":{"line":39,"column":8},"end":{"line":41,"column":9}}],"line":39},"1":{"loc":{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},{"start":{"line":45,"column":8},"end":{"line":47,"column":9}}],"line":45},"2":{"loc":{"start":{"line":45,"column":12},"end":{"line":45,"column":48}},"type":"binary-expr","locations":[{"start":{"line":45,"column":12},"end":{"line":45,"column":28}},{"start":{"line":45,"column":32},"end":{"line":45,"column":48}}],"line":45},"3":{"loc":{"start":{"line":51,"column":8},"end":{"line":53,"column":9}},"type":"if","locations":[{"start":{"line":51,"column":8},"end":{"line":53,"column":9}},{"start":{"line":51,"column":8},"end":{"line":53,"column":9}}],"line":51},"4":{"loc":{"start":{"line":51,"column":12},"end":{"line":51,"column":53}},"type":"binary-expr","locations":[{"start":{"line":51,"column":12},"end":{"line":51,"column":30}},{"start":{"line":51,"column":34},"end":{"line":51,"column":53}}],"line":51},"5":{"loc":{"start":{"line":60,"column":8},"end":{"line":62,"column":9}},"type":"if","locations":[{"start":{"line":60,"column":8},"end":{"line":62,"column":9}},{"start":{"line":60,"column":8},"end":{"line":62,"column":9}}],"line":60},"6":{"loc":{"start":{"line":60,"column":12},"end":{"line":60,"column":62}},"type":"binary-expr","locations":[{"start":{"line":60,"column":13},"end":{"line":60,"column":19}},{"start":{"line":60,"column":23},"end":{"line":60,"column":40}},{"start":{"line":60,"column":45},"end":{"line":60,"column":62}}],"line":60}},"s":{"0":1,"1":25,"2":24,"3":24,"4":24,"5":24,"6":23,"7":23,"8":23,"9":6,"10":7,"11":1,"12":8,"13":12,"14":4,"15":8,"16":0,"17":27,"18":2,"19":25,"20":27,"21":2,"22":25,"23":28,"24":4,"25":24,"26":24,"27":25,"28":1,"29":24,"30":23,"31":1},"f":{"0":25,"1":6,"2":7,"3":1,"4":8,"5":12,"6":4,"7":8,"8":0,"9":27,"10":27,"11":28,"12":24,"13":25,"14":23},"b":{"0":[2,25],"1":[2,25],"2":[27,26],"3":[4,24],"4":[28,26],"5":[1,24],"6":[25,25,1]},"inputSourceMap":{"version":3,"file":"C:/Users/paull/Documents/TAF/Projets Polytech/Projet Qualité Logicielle/Loaner/src/model/device.ts","sources":["C:/Users/paull/Documents/TAF/Projets Polytech/Projet Qualité Logicielle/Loaner/src/model/device.ts"],"names":[],"mappings":";;AAAA,MAAqB,MAAM;IAUvB,YAAY,GAAY,EAAE,UAAkB,EAAE,YAAoB,EAAE,IAAa,EAAE,OAAgB,EAAE,KAAc,EAAE,KAAc;QAC/H,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACjB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;QACjC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACnB,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QACzB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACrB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACrB,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;IACzB,CAAC;IAGM,MAAM;QACT,OAAO,IAAI,CAAC,GAAG,CAAC;IACpB,CAAC;IAEM,aAAa;QAChB,OAAO,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAEM,eAAe;QAClB,OAAO,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IAEM,OAAO;QACV,OAAO,IAAI,CAAC,IAAI,CAAC;IACrB,CAAC;IAEM,UAAU;QACb,OAAO,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;IAEM,QAAQ;QACX,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAEM,QAAQ;QACX,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAEM,WAAW;QACd,OAAO,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC;IAIM,MAAM,CAAC,GAAY;QACtB,IAAG,GAAG,CAAC,MAAM,IAAI,CAAC,EAAE;YAChB,MAAM,IAAI,KAAK,CAAC,mBAAmB,CAAC,CAAC;SACxC;QAED,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;IACnB,CAAC;IAEM,OAAO,CAAC,IAAa;QAExB,IAAG,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,GAAG,EAAE,EAAE;YACrC,MAAM,IAAI,KAAK,CAAC,cAAc,CAAC,CAAC;SACnC;QAED,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACrB,CAAC;IAEM,UAAU,CAAC,OAAgB;QAE9B,IAAG,OAAO,CAAC,MAAM,GAAG,CAAC,IAAI,OAAO,CAAC,MAAM,GAAG,EAAE,EAAE;YAC1C,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,CAAC;SACtC;QAED,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IAC3B,CAAC;IAEM,QAAQ,CAAC,KAAc;QAM1B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACvB,CAAC;IAEM,QAAQ,CAAC,KAAc;QAE1B,IAAG,CAAC,CAAC,KAAK,IAAI,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC,IAAI,KAAK,CAAC,MAAM,IAAI,CAAC,EAAE;YACnD,MAAM,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAA;SAC1C;QAED,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACvB,CAAC;IAEM,WAAW,CAAC,QAAmB;QAClC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC7B,CAAC;CACJ;AAvGD,yBAuGC","sourcesContent":["export default class Device {\r\n    private ref!: string;\r\n    private categoryID!: number;\r\n    private categoryName!: string;\r\n    private name!: string;\r\n    private version!: string;\r\n    private photo!: string;\r\n    private phone!: string;\r\n    private lockDays!: string[];\r\n\r\n    constructor(ref : string, categoryID: number, categoryName: string, name : string, version : string, photo : string, phone : string) {\r\n        this.setRef(ref);\r\n        this.categoryID = categoryID;\r\n        this.categoryName = categoryName;\r\n        this.setName(name);\r\n        this.setVersion(version);\r\n        this.setPhoto(photo);\r\n        this.setPhone(phone);\r\n        this.setLockDays([]);\r\n    }\r\n\r\n    // Getters\r\n    public getRef() : string {\r\n        return this.ref;\r\n    }\r\n\r\n    public getCategoryID() : number {\r\n        return this.categoryID;\r\n    }\r\n\r\n    public getCategoryName() : string {\r\n        return this.categoryName;\r\n    }\r\n\r\n    public getName() : string {\r\n        return this.name;\r\n    }\r\n\r\n    public getVersion() : string {\r\n        return this.version;\r\n    }\r\n\r\n    public getPhoto() : string {\r\n        return this.photo;\r\n    }\r\n\r\n    public getPhone() : string {\r\n        return this.phone;\r\n    }\r\n\r\n    public getLockDays() : string[] {\r\n        return this.lockDays;\r\n    }\r\n\r\n\r\n    // Setters\r\n    public setRef(ref : string) : void {\r\n        if(ref.length != 5) {\r\n            throw new Error(\"Invalid reference\");\r\n        }\r\n\r\n        this.ref = ref;\r\n    }\r\n\r\n    public setName(name : string) : void {\r\n\r\n        if(name.length == 0 || name.length > 30) {\r\n            throw new Error(\"Invalid name\");\r\n        }\r\n\r\n        this.name = name;\r\n    }\r\n\r\n    public setVersion(version : string) : void {\r\n\r\n        if(version.length < 3 || version.length > 15) {\r\n            throw new Error(\"Invalid version\");\r\n        }\r\n\r\n        this.version = version;\r\n    }\r\n\r\n    public setPhoto(photo : string) : void {\r\n        \r\n        /*if(photo.length == 0) {\r\n            throw new Error(\"Invalid photo\");\r\n        }*/\r\n\r\n        this.photo = photo;\r\n    }\r\n\r\n    public setPhone(phone : string) : void {\r\n\r\n        if((!phone || phone.length > 14) && phone.length != 0) {\r\n            throw new Error(\"Invalid phone number\")\r\n        }\r\n\r\n        this.phone = phone;\r\n    }\r\n\r\n    public setLockDays(lockDays : string[]) : void {\r\n        this.lockDays = lockDays;\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"252d333ac2d8cb4e78b84438dc0df6a322b8e238"},"C:\\Users\\paull\\Documents\\TAF\\Projets Polytech\\Projet Qualité Logicielle\\Loaner\\src\\dao\\dao_user.ts":{"path":"C:\\Users\\paull\\Documents\\TAF\\Projets Polytech\\Projet Qualité Logicielle\\Loaner\\src\\dao\\dao_user.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":62}},"23":{"start":{"line":24,"column":0},"end":{"line":24,"column":62}},"24":{"start":{"line":25,"column":14},"end":{"line":25,"column":30}},"25":{"start":{"line":26,"column":15},"end":{"line":26,"column":56}},"26":{"start":{"line":27,"column":15},"end":{"line":27,"column":57}},"27":{"start":{"line":28,"column":15},"end":{"line":28,"column":48}},"28":{"start":{"line":31,"column":8},"end":{"line":31,"column":127}},"29":{"start":{"line":34,"column":8},"end":{"line":34,"column":53}},"30":{"start":{"line":37,"column":8},"end":{"line":37,"column":73}},"31":{"start":{"line":40,"column":8},"end":{"line":40,"column":77}},"32":{"start":{"line":43,"column":8},"end":{"line":44,"column":85}},"33":{"start":{"line":47,"column":22},"end":{"line":47,"column":102}},"34":{"start":{"line":48,"column":8},"end":{"line":48,"column":126}},"35":{"start":{"line":51,"column":8},"end":{"line":51,"column":72}},"36":{"start":{"line":54,"column":8},"end":{"line":54,"column":85}},"37":{"start":{"line":57,"column":8},"end":{"line":57,"column":134}},"38":{"start":{"line":57,"column":87},"end":{"line":57,"column":99}},"39":{"start":{"line":57,"column":117},"end":{"line":57,"column":130}},"40":{"start":{"line":60,"column":8},"end":{"line":66,"column":11}},"41":{"start":{"line":62,"column":12},"end":{"line":64,"column":13}},"42":{"start":{"line":63,"column":16},"end":{"line":63,"column":44}},"43":{"start":{"line":65,"column":12},"end":{"line":65,"column":48}},"44":{"start":{"line":69,"column":8},"end":{"line":69,"column":155}},"45":{"start":{"line":72,"column":0},"end":{"line":72,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":21,"column":56},"end":{"line":21,"column":57}},"loc":{"start":{"line":21,"column":71},"end":{"line":23,"column":1}},"line":21},"7":{"name":"(anonymous_7)","decl":{"start":{"line":30,"column":4},"end":{"line":30,"column":5}},"loc":{"start":{"line":30,"column":20},"end":{"line":32,"column":5}},"line":30},"8":{"name":"(anonymous_8)","decl":{"start":{"line":33,"column":4},"end":{"line":33,"column":5}},"loc":{"start":{"line":33,"column":13},"end":{"line":35,"column":5}},"line":33},"9":{"name":"(anonymous_9)","decl":{"start":{"line":36,"column":4},"end":{"line":36,"column":5}},"loc":{"start":{"line":36,"column":20},"end":{"line":38,"column":5}},"line":36},"10":{"name":"(anonymous_10)","decl":{"start":{"line":39,"column":4},"end":{"line":39,"column":5}},"loc":{"start":{"line":39,"column":16},"end":{"line":41,"column":5}},"line":39},"11":{"name":"(anonymous_11)","decl":{"start":{"line":42,"column":4},"end":{"line":42,"column":5}},"loc":{"start":{"line":42,"column":28},"end":{"line":45,"column":5}},"line":42},"12":{"name":"(anonymous_12)","decl":{"start":{"line":46,"column":4},"end":{"line":46,"column":5}},"loc":{"start":{"line":46,"column":21},"end":{"line":49,"column":5}},"line":46},"13":{"name":"(anonymous_13)","decl":{"start":{"line":50,"column":4},"end":{"line":50,"column":5}},"loc":{"start":{"line":50,"column":23},"end":{"line":52,"column":5}},"line":50},"14":{"name":"(anonymous_14)","decl":{"start":{"line":53,"column":4},"end":{"line":53,"column":5}},"loc":{"start":{"line":53,"column":27},"end":{"line":55,"column":5}},"line":53},"15":{"name":"(anonymous_15)","decl":{"start":{"line":56,"column":4},"end":{"line":56,"column":5}},"loc":{"start":{"line":56,"column":28},"end":{"line":58,"column":5}},"line":56},"16":{"name":"(anonymous_16)","decl":{"start":{"line":57,"column":79},"end":{"line":57,"column":80}},"loc":{"start":{"line":57,"column":85},"end":{"line":57,"column":101}},"line":57},"17":{"name":"(anonymous_17)","decl":{"start":{"line":57,"column":109},"end":{"line":57,"column":110}},"loc":{"start":{"line":57,"column":115},"end":{"line":57,"column":132}},"line":57},"18":{"name":"(anonymous_18)","decl":{"start":{"line":59,"column":4},"end":{"line":59,"column":5}},"loc":{"start":{"line":59,"column":31},"end":{"line":67,"column":5}},"line":59},"19":{"name":"(anonymous_19)","decl":{"start":{"line":61,"column":18},"end":{"line":61,"column":19}},"loc":{"start":{"line":61,"column":27},"end":{"line":66,"column":9}},"line":61},"20":{"name":"(anonymous_20)","decl":{"start":{"line":68,"column":4},"end":{"line":68,"column":5}},"loc":{"start":{"line":68,"column":39},"end":{"line":70,"column":5}},"line":68}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17},"12":{"loc":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"type":"binary-expr","locations":[{"start":{"line":21,"column":23},"end":{"line":21,"column":27}},{"start":{"line":21,"column":31},"end":{"line":21,"column":51}},{"start":{"line":21,"column":56},"end":{"line":23,"column":1}}],"line":21},"13":{"loc":{"start":{"line":22,"column":11},"end":{"line":22,"column":61}},"type":"cond-expr","locations":[{"start":{"line":22,"column":37},"end":{"line":22,"column":40}},{"start":{"line":22,"column":43},"end":{"line":22,"column":61}}],"line":22},"14":{"loc":{"start":{"line":22,"column":12},"end":{"line":22,"column":33}},"type":"binary-expr","locations":[{"start":{"line":22,"column":12},"end":{"line":22,"column":15}},{"start":{"line":22,"column":19},"end":{"line":22,"column":33}}],"line":22},"15":{"loc":{"start":{"line":62,"column":12},"end":{"line":64,"column":13}},"type":"if","locations":[{"start":{"line":62,"column":12},"end":{"line":64,"column":13}},{"start":{"line":62,"column":12},"end":{"line":64,"column":13}}],"line":62}},"s":{"0":1,"1":16,"2":16,"3":16,"4":0,"5":0,"6":0,"7":0,"8":1,"9":2,"10":0,"11":1,"12":2,"13":0,"14":2,"15":2,"16":2,"17":16,"18":16,"19":2,"20":2,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":1},"f":{"0":16,"1":0,"2":0,"3":2,"4":0,"5":2,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"b":{"0":[1,1,1],"1":[1,0],"2":[16,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[0,2],"8":[2,2],"9":[2,0],"10":[16,0],"11":[16,16],"12":[1,1,1],"13":[1,0],"14":[1,1],"15":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/paull/Documents/TAF/Projets Polytech/Projet Qualité Logicielle/Loaner/src/dao/dao_user.ts","sources":["C:/Users/paull/Documents/TAF/Projets Polytech/Projet Qualité Logicielle/Loaner/src/dao/dao_user.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,+BAA4B;AAC5B,yDAAiC;AACjC,0DAA4C;AAE5C,iDAAmC;AAEnC,MAAqB,OAAQ,SAAQ,SAAS;IAEnC,UAAU,CAAC,GAAQ;QACxB,OAAO,IAAI,cAAI,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,SAAS,EAAE,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,KAAK,KAAK,CAAC,EAAE,GAAG,CAAC,iBAAiB,KAAK,CAAC,CAAC,CAAC;IAC/G,CAAC;IAEM,MAAM;QACX,OAAO,IAAI,CAAC,UAAU,CAAC,oBAAoB,CAAC,CAAA;IAC9C,CAAC;IAEM,OAAO,CAAC,MAAe;QAC5B,OAAO,IAAI,CAAC,SAAS,CAAC,+BAA+B,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;IACnE,CAAC;IAEM,SAAS;QACZ,OAAO,IAAI,CAAC,SAAS,CAAC,6CAA6C,CAAC,CAAC;IACzE,CAAC;IAEM,OAAO,CAAC,IAAW,EAAE,QAAiB;QACzC,OAAO,IAAI,CAAC,QAAQ,CAAC,wCAAwC,EAAE,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,IAAI,CAAC,YAAY,EAAE,EAAE,IAAI,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,QAAQ,EAAE;YACpI,IAAI,CAAC,OAAO,EAAE,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,MAAM,CAAC,cAAc,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;IAC/E,CAAC;IAEM,UAAU,CAAC,IAAW;QAC3B,MAAM,KAAK,GAAG,gFAAgF,CAAC;QAC/F,OAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,IAAI,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,EAAE,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;IACxH,CAAC;IAEM,UAAU,CAAC,MAAe;QAC/B,OAAO,IAAI,CAAC,QAAQ,CAAC,+BAA+B,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;IAClE,CAAC;IAEM,cAAc,CAAC,MAAe;QACnC,OAAO,IAAI,CAAC,QAAQ,CAAC,4CAA4C,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;IAC/E,CAAC;IAEM,gBAAgB,CAAC,KAAc;QACpC,OAAO,IAAI,CAAC,SAAS,CAAC,iCAAiC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,OAAO,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IAChI,CAAC;IAGM,SAAS,CAAC,KAAc,EAAE,QAAiB;QAChD,OAAO,IAAI,CAAC,eAAe,CAAC,iCAAiC,EAAE,CAAC,KAAK,CAAC,CAAC;aACtE,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;YACZ,IAAG,MAAM,CAAC,WAAW,CAAC,QAAQ,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAE;gBAC7C,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;aAC7B;YAED,MAAM,IAAI,KAAK,CAAC,kBAAkB,CAAC,CAAC;QACtC,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,cAAc,CAAC,KAAc,EAAE,WAAoB;QACxD,OAAO,IAAI,CAAC,QAAQ,CAAC,8DAA8D,EACjF,CAAC,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE,MAAM,CAAC,cAAc,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;IAElE,CAAC;CACJ;AAzDD,0BAyDC","sourcesContent":["import { DAO } from './dao';\r\nimport User from '../model/user';\r\nimport * as config from '../../config.json';\r\n\r\nimport * as bcrypt from 'bcryptjs';\r\n\r\nexport default class DAOUser extends DAO<User> {\r\n\r\n    public rowToModel(row: any): User {\r\n      return new User(row.id, row.firstName, row.lastName, row.mail, row.admin === 1, row.temporaryPassword === 1);\r\n    }\r\n\r\n    public getAll() : Promise<User[]> {\r\n      return this.getAllRows(\"SELECT * FROM user\")\r\n    }\r\n\r\n    public getUser(idUser : string) : Promise<User> {\r\n      return this.getOneRow(\"SELECT * FROM user WHERE id=?\", [idUser]);\r\n    }\r\n\r\n    public getLastId() : Promise<User> {\r\n        return this.getOneRow('SELECT * FROM user ORDER BY id DESC LIMIT 1');\r\n    }\r\n\r\n    public addUser(user : User, password : string) : Promise<void> {\r\n        return this.runQuery(\"INSERT INTO user VALUES(?,?,?,?,?,?,?)\", [user.getId(), user.getFirstName(), user.getLastName(), user.getEmail(),\r\n          user.isAdmin(), bcrypt.hashSync(password, config.hashSaltRounds), true]);\r\n    }\r\n\r\n    public updateUser(user : User) : Promise<void> {\r\n      const query = \"UPDATE user SET firstname = ?, lastname = ?, email = ?, admin = ? WHERE id = ?\";\r\n      return this.runQuery(query, [user.getFirstName(), user.getLastName(), user.getEmail(), user.isAdmin(), user.getId()]);\r\n    }\r\n\r\n    public deleteUser(idUser : string) : Promise<void> {\r\n      return this.runQuery(\"DELETE FROM user WHERE id = ?\", [idUser]);\r\n    }\r\n\r\n    public getUserHistory(idUser : string) : Promise<void> {\r\n      return this.runQuery(\"SELECT * FROM reservation WHERE iduser = ?\", [idUser]);\r\n    }\r\n\r\n    public hasUserWithEmail(email : string) : Promise<boolean> {\r\n      return this.getOneRow(\"SELECT * FROM user WHERE mail=?\", [email]).then(() => { return true; }).catch(() => { return false; });\r\n    }\r\n\r\n    // Partie authentification\r\n    public checkUser(email : string, password : string) : Promise<User> {\r\n      return this.getOneRowNoCast(\"SELECT * FROM user WHERE mail=?\", [email])\r\n      .then((row) => {\r\n        if(bcrypt.compareSync(password, row.password)) {\r\n          return this.rowToModel(row);\r\n        }\r\n        \r\n        throw new Error(\"Invalid password\");\r\n      });\r\n    }\r\n\r\n    public changePassword(email : string, newPassword : string) : Promise<void> {\r\n      return this.runQuery(\"UPDATE user SET password=?, temporaryPassword=0 WHERE mail=?\",\r\n        [bcrypt.hashSync(newPassword, config.hashSaltRounds), email]);\r\n        //.then(async () => { console.log(\"ss\"); await this.runQuery(\"UPDATE user SET temporaryPassword=0 WHERE mail=?\", [email]); });\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"07851d22cc462f9ec1893cc566172701332c67ff"},"C:\\Users\\paull\\Documents\\TAF\\Projets Polytech\\Projet Qualité Logicielle\\Loaner\\src\\model\\user.ts":{"path":"C:\\Users\\paull\\Documents\\TAF\\Projets Polytech\\Projet Qualité Logicielle\\Loaner\\src\\model\\user.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":23}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":37}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":35}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":29}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":29}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":53}},"7":{"start":{"line":13,"column":8},"end":{"line":13,"column":23}},"8":{"start":{"line":16,"column":8},"end":{"line":16,"column":30}},"9":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"10":{"start":{"line":22,"column":8},"end":{"line":22,"column":26}},"11":{"start":{"line":25,"column":8},"end":{"line":25,"column":26}},"12":{"start":{"line":28,"column":8},"end":{"line":28,"column":38}},"13":{"start":{"line":31,"column":8},"end":{"line":31,"column":21}},"14":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"15":{"start":{"line":35,"column":12},"end":{"line":35,"column":49}},"16":{"start":{"line":37,"column":8},"end":{"line":37,"column":35}},"17":{"start":{"line":40,"column":8},"end":{"line":42,"column":9}},"18":{"start":{"line":41,"column":12},"end":{"line":41,"column":48}},"19":{"start":{"line":43,"column":8},"end":{"line":43,"column":33}},"20":{"start":{"line":47,"column":8},"end":{"line":49,"column":9}},"21":{"start":{"line":48,"column":12},"end":{"line":48,"column":45}},"22":{"start":{"line":50,"column":8},"end":{"line":50,"column":27}},"23":{"start":{"line":53,"column":8},"end":{"line":53,"column":27}},"24":{"start":{"line":56,"column":8},"end":{"line":56,"column":51}},"25":{"start":{"line":59,"column":0},"end":{"line":59,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":74},"end":{"line":11,"column":5}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":12},"end":{"line":14,"column":5}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":19},"end":{"line":17,"column":5}},"line":15},"3":{"name":"(anonymous_3)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":18},"end":{"line":20,"column":5}},"line":18},"4":{"name":"(anonymous_4)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":15},"end":{"line":23,"column":5}},"line":21},"5":{"name":"(anonymous_5)","decl":{"start":{"line":24,"column":4},"end":{"line":24,"column":5}},"loc":{"start":{"line":24,"column":14},"end":{"line":26,"column":5}},"line":24},"6":{"name":"(anonymous_6)","decl":{"start":{"line":27,"column":4},"end":{"line":27,"column":5}},"loc":{"start":{"line":27,"column":27},"end":{"line":29,"column":5}},"line":27},"7":{"name":"(anonymous_7)","decl":{"start":{"line":30,"column":4},"end":{"line":30,"column":5}},"loc":{"start":{"line":30,"column":14},"end":{"line":32,"column":5}},"line":30},"8":{"name":"(anonymous_8)","decl":{"start":{"line":33,"column":4},"end":{"line":33,"column":5}},"loc":{"start":{"line":33,"column":28},"end":{"line":38,"column":5}},"line":33},"9":{"name":"(anonymous_9)","decl":{"start":{"line":39,"column":4},"end":{"line":39,"column":5}},"loc":{"start":{"line":39,"column":26},"end":{"line":44,"column":5}},"line":39},"10":{"name":"(anonymous_10)","decl":{"start":{"line":45,"column":4},"end":{"line":45,"column":5}},"loc":{"start":{"line":45,"column":20},"end":{"line":51,"column":5}},"line":45},"11":{"name":"(anonymous_11)","decl":{"start":{"line":52,"column":4},"end":{"line":52,"column":5}},"loc":{"start":{"line":52,"column":20},"end":{"line":54,"column":5}},"line":52},"12":{"name":"(anonymous_12)","decl":{"start":{"line":55,"column":4},"end":{"line":55,"column":5}},"loc":{"start":{"line":55,"column":44},"end":{"line":57,"column":5}},"line":55}},"branchMap":{"0":{"loc":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"type":"if","locations":[{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},{"start":{"line":34,"column":8},"end":{"line":36,"column":9}}],"line":34},"1":{"loc":{"start":{"line":34,"column":12},"end":{"line":34,"column":72}},"type":"binary-expr","locations":[{"start":{"line":34,"column":12},"end":{"line":34,"column":22}},{"start":{"line":34,"column":26},"end":{"line":34,"column":47}},{"start":{"line":34,"column":51},"end":{"line":34,"column":72}}],"line":34},"2":{"loc":{"start":{"line":40,"column":8},"end":{"line":42,"column":9}},"type":"if","locations":[{"start":{"line":40,"column":8},"end":{"line":42,"column":9}},{"start":{"line":40,"column":8},"end":{"line":42,"column":9}}],"line":40},"3":{"loc":{"start":{"line":40,"column":12},"end":{"line":40,"column":69}},"type":"binary-expr","locations":[{"start":{"line":40,"column":12},"end":{"line":40,"column":21}},{"start":{"line":40,"column":25},"end":{"line":40,"column":45}},{"start":{"line":40,"column":49},"end":{"line":40,"column":69}}],"line":40},"4":{"loc":{"start":{"line":47,"column":8},"end":{"line":49,"column":9}},"type":"if","locations":[{"start":{"line":47,"column":8},"end":{"line":49,"column":9}},{"start":{"line":47,"column":8},"end":{"line":49,"column":9}}],"line":47},"5":{"loc":{"start":{"line":47,"column":12},"end":{"line":47,"column":145}},"type":"binary-expr","locations":[{"start":{"line":47,"column":12},"end":{"line":47,"column":18}},{"start":{"line":47,"column":22},"end":{"line":47,"column":39}},{"start":{"line":47,"column":43},"end":{"line":47,"column":145}}],"line":47},"6":{"loc":{"start":{"line":47,"column":44},"end":{"line":47,"column":139}},"type":"cond-expr","locations":[{"start":{"line":47,"column":121},"end":{"line":47,"column":127}},{"start":{"line":47,"column":130},"end":{"line":47,"column":139}}],"line":47},"7":{"loc":{"start":{"line":47,"column":44},"end":{"line":47,"column":118}},"type":"binary-expr","locations":[{"start":{"line":47,"column":44},"end":{"line":47,"column":101}},{"start":{"line":47,"column":105},"end":{"line":47,"column":118}}],"line":47}},"s":{"0":1,"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":2,"9":2,"10":2,"11":2,"12":0,"13":3,"14":4,"15":1,"16":3,"17":4,"18":1,"19":3,"20":7,"21":4,"22":3,"23":3,"24":2,"25":1},"f":{"0":2,"1":2,"2":2,"3":2,"4":2,"5":2,"6":0,"7":3,"8":4,"9":4,"10":7,"11":3,"12":2},"b":{"0":[1,3],"1":[4,3,3],"2":[1,3],"3":[4,3,3],"4":[4,3],"5":[7,7,7],"6":[4,3],"7":[7,3]},"inputSourceMap":{"version":3,"file":"C:/Users/paull/Documents/TAF/Projets Polytech/Projet Qualité Logicielle/Loaner/src/model/user.ts","sources":["C:/Users/paull/Documents/TAF/Projets Polytech/Projet Qualité Logicielle/Loaner/src/model/user.ts"],"names":[],"mappings":";;AAAA,MAAqB,IAAI;IAQrB,YAAY,EAAU,EAAE,SAAiB,EAAE,QAAgB,EAAE,KAAa,EAAE,KAAc,EAAE,iBAA0B;QACpH,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QACf,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;QAC7B,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;QAC3B,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACrB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACrB,IAAI,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,CAAC;IAC/C,CAAC;IAGM,KAAK;QACV,OAAO,IAAI,CAAC,EAAE,CAAC;IACjB,CAAC;IAEM,YAAY;QACjB,OAAO,IAAI,CAAC,SAAS,CAAC;IACxB,CAAC;IAEM,WAAW;QAChB,OAAO,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAEM,QAAQ;QACb,OAAO,IAAI,CAAC,KAAK,CAAC;IACpB,CAAC;IAEM,OAAO;QACZ,OAAO,IAAI,CAAC,KAAK,CAAC;IACpB,CAAC;IAEM,oBAAoB;QACzB,OAAO,IAAI,CAAC,iBAAiB,CAAC;IAChC,CAAC;IAGM,KAAK,CAAC,EAAU;QAMrB,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;IACf,CAAC;IAEM,YAAY,CAAC,SAAkB;QAEpC,IAAG,CAAC,SAAS,IAAI,SAAS,CAAC,MAAM,IAAI,CAAC,IAAI,SAAS,CAAC,MAAM,GAAG,EAAE,EAAE;YAC/D,MAAM,IAAI,KAAK,CAAC,mBAAmB,CAAC,CAAC;SACtC;QAED,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;IAC7B,CAAC;IAEM,WAAW,CAAC,QAAiB;QAClC,IAAG,CAAC,QAAQ,IAAI,QAAQ,CAAC,MAAM,IAAI,CAAC,IAAI,QAAQ,CAAC,MAAM,GAAG,EAAE,EAAE;YAC5D,MAAM,IAAI,KAAK,CAAC,kBAAkB,CAAC,CAAC;SACrC;QAED,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC3B,CAAC;IAEM,QAAQ,CAAC,KAAc;;QAE5B,IAAG,CAAC,KAAK,IAAI,KAAK,CAAC,MAAM,IAAI,CAAC,IAAI,OAAA,KAAK,CAAC,KAAK,CAAC,4BAA4B,CAAC,0CAAE,MAAM,KAAI,CAAC,EAAE;YACxF,MAAM,IAAI,KAAK,CAAC,eAAe,CAAC,CAAC;SAClC;QAED,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACrB,CAAC;IAEM,QAAQ,CAAC,KAAe;QAC7B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACrB,CAAC;IAEM,oBAAoB,CAAC,iBAA0B;QACpD,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;IAC7C,CAAC;CACJ;AArFD,uBAqFC","sourcesContent":["export default class User {\r\n    private id!: string;\r\n    private firstName!: string;\r\n    private lastName!: string;\r\n    private email!: string;\r\n    private admin!: boolean;\r\n    private temporaryPassword!: boolean;\r\n\r\n    constructor(id: string, firstName: string, lastName: string, email: string, admin: boolean, temporaryPassword: boolean){\r\n      this.setId(id);\r\n      this.setFirstName(firstName);\r\n      this.setLastName(lastName);\r\n      this.setEmail(email);\r\n      this.setAdmin(admin);\r\n      this.setTemporaryPassword(temporaryPassword);\r\n    }\r\n\r\n    // Getters\r\n    public getId() : string {\r\n      return this.id;\r\n    }\r\n\r\n    public getFirstName() : string {\r\n      return this.firstName;\r\n    }\r\n\r\n    public getLastName() : string {\r\n      return this.lastName;\r\n    }\r\n\r\n    public getEmail() : string {\r\n      return this.email;\r\n    }\r\n\r\n    public isAdmin() : boolean {\r\n      return this.admin;\r\n    }\r\n\r\n    public hasTemporaryPassword() : boolean {\r\n      return this.temporaryPassword;\r\n    }\r\n\r\n    // Setters\r\n    public setId(id: string) : void {\r\n\r\n      /*if(id.length != 7) {\r\n        throw new Error(\"Invalid ID\");\r\n      /}*/\r\n\r\n      this.id = id;\r\n    }\r\n\r\n    public setFirstName(firstName : string) : void {\r\n\r\n      if(!firstName || firstName.length == 0 || firstName.length > 30) {\r\n        throw new Error(\"Invalid firstname\");\r\n      }\r\n      \r\n      this.firstName = firstName;\r\n    }\r\n\r\n    public setLastName(lastName : string) : void {\r\n      if(!lastName || lastName.length == 0 || lastName.length > 30) {\r\n        throw new Error(\"Invalid lastname\");\r\n      }\r\n\r\n      this.lastName = lastName;\r\n    }\r\n\r\n    public setEmail(email : string) : void {\r\n      \r\n      if(!email || email.length == 0 || email.match(/^[^@\\s]+@[^@\\s]+\\.[^@\\s]+/g)?.length != 1) {\r\n        throw new Error(\"Invalid email\");\r\n      }\r\n      \r\n      this.email = email;\r\n    }\r\n\r\n    public setAdmin(admin : boolean) : void {\r\n      this.admin = admin;\r\n    }\r\n\r\n    public setTemporaryPassword(temporaryPassword: boolean): void {\r\n      this.temporaryPassword = temporaryPassword;\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"bfafaf48e6a6e32bd87622c2fa72f4d8b6f4055a"},"C:\\Users\\paull\\Documents\\TAF\\Projets Polytech\\Projet Qualité Logicielle\\Loaner\\src\\dao\\dao_reservation.ts":{"path":"C:\\Users\\paull\\Documents\\TAF\\Projets Polytech\\Projet Qualité Logicielle\\Loaner\\src\\dao\\dao_reservation.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":14},"end":{"line":6,"column":30}},"4":{"start":{"line":7,"column":22},"end":{"line":7,"column":70}},"5":{"start":{"line":10,"column":8},"end":{"line":10,"column":120}},"6":{"start":{"line":13,"column":8},"end":{"line":13,"column":84}},"7":{"start":{"line":16,"column":8},"end":{"line":16,"column":90}},"8":{"start":{"line":19,"column":0},"end":{"line":19,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":20},"end":{"line":11,"column":5}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":16},"end":{"line":14,"column":5}},"line":12},"3":{"name":"(anonymous_3)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":28},"end":{"line":17,"column":5}},"line":15}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":4,"7":3,"8":1},"f":{"0":1,"1":0,"2":4,"3":3},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/paull/Documents/TAF/Projets Polytech/Projet Qualité Logicielle/Loaner/src/dao/dao_reservation.ts","sources":["C:/Users/paull/Documents/TAF/Projets Polytech/Projet Qualité Logicielle/Loaner/src/dao/dao_reservation.ts"],"names":[],"mappings":";;;;;AAAA,+BAA4B;AAC5B,uEAA+C;AAE/C,MAAqB,WAAY,SAAQ,SAAgB;IAE9C,UAAU,CAAC,GAAQ;QACtB,OAAO,IAAI,qBAAW,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,SAAS,EAAE,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,SAAS,EAAE,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,UAAU,CAAC,CAAC;IAC1G,CAAC;IAEM,SAAS;QACZ,OAAO,IAAI,CAAC,SAAS,CAAC,oDAAoD,CAAC,CAAC;IAChF,CAAC;IAEM,aAAa,CAAC,QAAiB;QAClC,OAAO,IAAI,CAAC,UAAU,CAAC,6CAA6C,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC;IACtF,CAAC;CAEJ;AAdD,8BAcC","sourcesContent":["import { DAO } from './dao';\r\nimport Reservation from '../model/reservation';\r\n\r\nexport default class DAOCatgeory extends DAO<Reservation> {\r\n\r\n    public rowToModel(row: any): Reservation {\r\n        return new Reservation(row.ID, row.refDevice, row.idUser, row.startDate, row.endDate, row.returnDate);\r\n    }\r\n\r\n    public getLastId() : Promise<Reservation>{\r\n        return this.getOneRow('select * from reservation order by id DESC LIMIT 1');\r\n    }\r\n\r\n    public historyDevice(idDevice : string) : Promise<Reservation []> {\r\n        return this.getAllRows('select * from reservation where refDevice=?', [idDevice]);\r\n    }\r\n    // ...\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"671e8bdc6a05eacb22bcc22f355c3068d09c8c74"},"C:\\Users\\paull\\Documents\\TAF\\Projets Polytech\\Projet Qualité Logicielle\\Loaner\\src\\model\\reservation.ts":{"path":"C:\\Users\\paull\\Documents\\TAF\\Projets Polytech\\Projet Qualité Logicielle\\Loaner\\src\\model\\reservation.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":21}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":35}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":29}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":35}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":31}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":37}},"7":{"start":{"line":13,"column":8},"end":{"line":13,"column":23}},"8":{"start":{"line":16,"column":8},"end":{"line":16,"column":30}},"9":{"start":{"line":19,"column":8},"end":{"line":19,"column":27}},"10":{"start":{"line":22,"column":8},"end":{"line":22,"column":30}},"11":{"start":{"line":25,"column":8},"end":{"line":25,"column":28}},"12":{"start":{"line":28,"column":8},"end":{"line":28,"column":31}},"13":{"start":{"line":31,"column":0},"end":{"line":31,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":71},"end":{"line":11,"column":5}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":12},"end":{"line":14,"column":5}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":16},"end":{"line":17,"column":5}},"line":15},"3":{"name":"(anonymous_3)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":14},"end":{"line":20,"column":5}},"line":18},"4":{"name":"(anonymous_4)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":19},"end":{"line":23,"column":5}},"line":21},"5":{"name":"(anonymous_5)","decl":{"start":{"line":24,"column":4},"end":{"line":24,"column":5}},"loc":{"start":{"line":24,"column":17},"end":{"line":26,"column":5}},"line":24},"6":{"name":"(anonymous_6)","decl":{"start":{"line":27,"column":4},"end":{"line":27,"column":5}},"loc":{"start":{"line":27,"column":20},"end":{"line":29,"column":5}},"line":27}},"branchMap":{},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/paull/Documents/TAF/Projets Polytech/Projet Qualité Logicielle/Loaner/src/model/reservation.ts","sources":["C:/Users/paull/Documents/TAF/Projets Polytech/Projet Qualité Logicielle/Loaner/src/model/reservation.ts"],"names":[],"mappings":";;AAAA,MAAqB,WAAW;IAQ5B,YAAY,EAAW,EAAE,SAAiB,EAAE,MAAe,EAAE,SAAgB,EAAE,OAAc,EAAE,UAAiB;QAC5G,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;IACjC,CAAC;IAEM,KAAK;QACR,OAAO,IAAI,CAAC,EAAE,CAAC;IACnB,CAAC;IAEM,SAAS;QACZ,OAAO,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAEM,OAAO;QACV,OAAO,IAAI,CAAC,MAAM,CAAC;IACvB,CAAC;IAEM,YAAY;QACf,OAAO,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAEM,UAAU;QACb,OAAO,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;IAEM,aAAa;QAChB,OAAO,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;CACJ;AAxCD,8BAwCC","sourcesContent":["export default class Reservation {\r\n    private ID!: number;\r\n    private refDevice!: string;\r\n    private idUser!: string;\r\n    private startDate!: Date;\r\n    private endDate!: Date;\r\n    private returnDate!: Date;\r\n\r\n    constructor(ID : number, refDevice: string, idUser : string, startDate : Date, endDate : Date, returnDate : Date) {\r\n        this.ID = ID;\r\n        this.refDevice = refDevice;\r\n        this.idUser = idUser;\r\n        this.startDate = startDate;\r\n        this.endDate = endDate;\r\n        this.returnDate = returnDate;\r\n    }\r\n\r\n    public getID() : number {\r\n        return this.ID;\r\n    }\r\n\r\n    public getDevice() : string {\r\n        return this.refDevice;\r\n    }\r\n\r\n    public getUser() : string {\r\n        return this.idUser;\r\n    }\r\n\r\n    public getStartDate() : Date {\r\n        return this.startDate;\r\n    }\r\n\r\n    public getEndDate() : Date {\r\n        return this.endDate;\r\n    }\r\n\r\n    public getReturnDate() : Date {\r\n        return this.returnDate;\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"16bb4eb0601fdd56741d865dacab2683f1d0bca4"}}